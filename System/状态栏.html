<head><script type="module">import{waitUntil as e}from'https://testingcf.jsdelivr.net/npm/async-wait-until/+esm';import{createPinia as t,defineStore as l}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var n={502(e,t){t.A=(e,t)=>{const l=e.__vccOpts||e;for(const[e,n]of t)l[e]=n;return l}}},a={};const o=Vue,c=['data-text'],s=(0,o.defineComponent)({__name:'GlitchText',props:{text:{},autoGlitch:{type:Boolean}},setup(e){const t=e,l=(0,o.ref)(!1);let n=null;function a(){l.value=!0,setTimeout(()=>{l.value=!1},300)}return(0,o.onMounted)(()=>{t.autoGlitch&&(n=setInterval(a,4800+2400*Math.random()))}),(0,o.onBeforeUnmount)(()=>{n&&clearInterval(n)}),(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('span',{class:(0,o.normalizeClass)(['glitch-text',{active:(0,o.unref)(l)}]),'data-text':e.text},(0,o.toDisplayString)(e.text),11,c))}});var r=function e(t){var l=a[t];if(void 0!==l)return l.exports;var o=a[t]={exports:{}};return n[t](o,o.exports,e),o.exports}(502);const i=(0,r.A)(s,[['__scopeId','data-v-efa08dda']]);function d(e){return!!(0,o.getCurrentScope)()&&((0,o.onScopeDispose)(e),!0)}const u='undefined'!=typeof window&&'undefined'!=typeof document,m=('undefined'!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope),Object.prototype.toString),v=e=>'[object Object]'===m.call(e),p=()=>{};function f(...e){if(1!==e.length)return(0,o.toRef)(...e);const t=e[0];return'function'==typeof t?(0,o.readonly)((0,o.customRef)(()=>({get:t,set:p}))):(0,o.ref)(t)}function b(e,t){return function(...l){return new Promise((n,a)=>{Promise.resolve(e(()=>t.apply(this,l),{fn:t,thisArg:this,args:l})).then(n).catch(a)})}}const V=e=>e();function N(e){return Array.isArray(e)?e:[e]}function k(e){const t=Object.create(null);return l=>t[l]||(t[l]=e(l))}const E=/\B([A-Z])/g,g=(k(e=>e.replace(E,'-$1').toLowerCase()),/-(\w)/g);k(e=>e.replace(g,(_,e)=>e?e.toUpperCase():''));function y(e){return e||(0,o.getCurrentInstance)()}function h(e,t,l={}){const{eventFilter:n=V,...a}=l;return(0,o.watch)(e,b(n,t),a)}function C(e,t,l={}){const{eventFilter:n,initialState:a='active',...c}=l,{eventFilter:s,pause:r,resume:i,isActive:d}=function(e=V,t={}){const{initialState:l='active'}=t,n=f('active'===l);return{isActive:(0,o.readonly)(n),pause:function(){n.value=!1},resume:function(){n.value=!0},eventFilter:(...t)=>{n.value&&e(...t)}}}(n,{initialState:a});return{stop:h(e,t,{...c,eventFilter:s}),pause:r,resume:i,isActive:d}}function B(e,t=1e3,l={}){const{immediate:n=!0,immediateCallback:a=!1}=l;let c=null;const s=(0,o.shallowRef)(!1);function r(){c&&(clearInterval(c),c=null)}function i(){s.value=!1,r()}function m(){const l=(0,o.toValue)(t);l<=0||(s.value=!0,a&&e(),r(),s.value&&(c=setInterval(e,l)))}if(n&&u&&m(),(0,o.isRef)(t)||'function'==typeof t){d((0,o.watch)(t,()=>{s.value&&u&&m()}))}return d(i),{isActive:(0,o.shallowReadonly)(s),pause:i,resume:m}}function w(e,t,l={}){const{eventFilter:n=V,...a}=l,c=b(n,t);let s,r,i;if('sync'===a.flush){let t=!1;r=()=>{},s=e=>{t=!0,e(),t=!1},i=(0,o.watch)(e,(...e)=>{t||c(...e)},a)}else{const t=[];let l=0,n=0;r=()=>{l=n},t.push((0,o.watch)(e,()=>{n++},{...a,flush:'sync'})),s=e=>{const t=n;e(),l+=n-t},t.push((0,o.watch)(e,(...e)=>{const t=l>0&&l===n;l=0,n=0,t||c(...e)},a)),i=()=>{t.forEach(e=>e())}}return{stop:i,ignoreUpdates:s,ignorePrevAsyncUpdates:r}}const S=z,D=S.z.enum(['Ti','Te','Fi','Fe','Ni','Ne','Si','Se']),T={标题:'待发布',描述:'暂无',条件:'暂无',失败惩罚:null,时间限制:null,奖励:{积分:0,物品:{}},完成:!1},x={主线:T,支线:{}},M=S.z.object({宿主:S.z.object({姓名:S.z.string().nullable(),性别:S.z.enum(['男','女','双性','其他']).nullable().catch(null),年龄:S.z.coerce.number().nullable(),性格:S.z.object({荣格八维:S.z.object({主导:D.nullable(),辅助:D.nullable(),第三:D.nullable(),劣势:D.nullable()}),核心特征:S.z.string().nullable()}),隐藏秘密:S.z.string().nullable()}).catch({姓名:null,性别:null,年龄:null,性格:{荣格八维:{主导:null,辅助:null,第三:null,劣势:null},核心特征:null},隐藏秘密:null}),身体:S.z.object({性别:S.z.enum(['男','女','双性','其他']).nullable().catch(null),贞操状态:S.z.object({处女:S.z.boolean().nullable(),口腔处女:S.z.boolean().nullable(),肛门处女:S.z.boolean().nullable(),阴茎处男:S.z.boolean().nullable()}),穿着:S.z.object({上衣:S.z.string().nullable(),下装:S.z.string().nullable(),足部:S.z.string().nullable(),内衣:S.z.string().nullable(),内裤:S.z.string().nullable()}),即时状态:S.z.object({小穴:S.z.string().nullable(),子宫:S.z.string().nullable(),屁穴:S.z.string().nullable(),体液:S.z.string().nullable(),阴茎:S.z.string().nullable(),前列腺:S.z.string().nullable(),尿道:S.z.string().nullable(),精液:S.z.string().nullable()})}).catch({性别:null,贞操状态:{处女:null,口腔处女:null,肛门处女:null,阴茎处男:null},穿着:{上衣:null,下装:null,足部:null,内衣:null,内裤:null},即时状态:{小穴:null,子宫:null,屁穴:null,体液:null,阴茎:null,前列腺:null,尿道:null,精液:null}}),堕落计数:S.z.record(S.z.string().describe('行为类型'),S.z.coerce.number()).catch({}),心理:S.z.object({对系统态度:S.z.enum(['困惑抗拒','勉强服从','消极应对','被动顺从','主动配合','依赖渴望','彻底沉沦']).catch('困惑抗拒'),羁绊值:S.z.coerce.number().transform(e=>_.clamp(e,0,100)).catch(0)}).catch({对系统态度:'困惑抗拒',羁绊值:0}),任务:S.z.object({主线:S.z.object({标题:S.z.string(),描述:S.z.string(),条件:S.z.string(),失败惩罚:S.z.string().nullable().catch(null),时间限制:S.z.string().nullable().catch(null),奖励:S.z.object({积分:S.z.coerce.number().catch(0),物品:S.z.record(S.z.string().describe('物品名'),S.z.coerce.number()).catch({})}).catch({积分:0,物品:{}}),完成:S.z.boolean()}).catch(T),支线:S.z.record(S.z.string().describe('支线编号'),S.z.object({标题:S.z.string(),描述:S.z.string(),条件:S.z.string(),失败惩罚:S.z.string().nullable().catch(null),时间限制:S.z.string().nullable().catch(null),奖励:S.z.object({积分:S.z.coerce.number().catch(0),物品:S.z.record(S.z.string().describe('物品名'),S.z.coerce.number()).catch({})}).catch({积分:0,物品:{}}),完成:S.z.boolean()})).catch({})}).catch(x),系统:S.z.object({积分:S.z.coerce.number().transform(e=>_.clamp(e,0,99999)).catch(0),当前日期:S.z.string().catch('未知'),当前时间:S.z.string().catch('未知'),羁绊完成人数:S.z.coerce.number().catch(0)}).catch({积分:0,当前日期:'未知',当前时间:'未知',羁绊完成人数:0}),商城:S.z.object({在售:S.z.record(S.z.string().describe('商品名'),S.z.object({描述:S.z.string(),价格:S.z.coerce.number(),库存:S.z.coerce.number()})).catch({}),背包:S.z.record(S.z.string().describe('物品名'),S.z.object({描述:S.z.string(),数量:S.z.coerce.number(),来源:S.z.enum(['商城','任务奖励'])})).catch({})}).catch({在售:{},背包:{}})});const I=u?window:void 0;u&&window.document,u&&window.navigator,u&&window.location;function j(e){var t;const l=(0,o.toValue)(e);return null!=(t=null==l?void 0:l.$el)?t:l}function A(...e){const t=[],l=()=>{t.forEach(e=>e()),t.length=0},n=(0,o.computed)(()=>{const t=N((0,o.toValue)(e[0])).filter(e=>null!=e);return t.every(e=>'string'!=typeof e)?t:void 0}),a=(c=()=>{var t,l;return[null!=(l=null==(t=n.value)?void 0:t.map(e=>j(e)))?l:[I].filter(e=>null!=e),N((0,o.toValue)(n.value?e[1]:e[0])),N((0,o.unref)(n.value?e[2]:e[1])),(0,o.toValue)(n.value?e[3]:e[2])]},s=([e,n,a,o])=>{if(l(),!(null==e?void 0:e.length)||!(null==n?void 0:n.length)||!(null==a?void 0:a.length))return;const c=v(o)?{...o}:o;t.push(...e.flatMap(e=>n.flatMap(t=>a.map(l=>((e,t,l,n)=>(e.addEventListener(t,l,n),()=>e.removeEventListener(t,l,n)))(e,t,l,c)))))},r={flush:'post'},(0,o.watch)(c,s,{...r,immediate:!0}));var c,s,r;return d(l),()=>{a(),l()}}Symbol('vueuse-ssr-width');const U='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof self?self:{},P='__vueuse_ssr_handlers__',q=F();function F(){return P in U||(U[P]=U[P]||{}),U[P]}function O(e,t){return q[e]||t}function L(e){return null==e?'any':e instanceof Set?'set':e instanceof Map?'map':e instanceof Date?'date':'boolean'==typeof e?'boolean':'string'==typeof e?'string':'object'==typeof e?'object':Number.isNaN(e)?'any':'number'}const R={boolean:{read:e=>'true'===e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},G='vueuse-storage';function J(e,t,l,n={}){var a;const{flush:c='pre',deep:s=!0,listenToStorageChanges:r=!0,writeDefaults:i=!0,mergeDefaults:d=!1,shallow:u,window:m=I,eventFilter:v,onError:p=e=>{console.error(e)},initOnMounted:f}=n,b=(u?o.shallowRef:o.ref)('function'==typeof t?t():t),V=(0,o.computed)(()=>(0,o.toValue)(e));if(!l)try{l=O('getDefaultStorage',()=>{var e;return null==(e=I)?void 0:e.localStorage})()}catch(e){p(e)}if(!l)return b;const N=(0,o.toValue)(t),k=L(N),E=null!=(a=n.serializer)?a:R[k],{pause:g,resume:h}=C(b,e=>function(e){try{const t=l.getItem(V.value);if(null==e)S(t,null),l.removeItem(V.value);else{const n=E.write(e);t!==n&&(l.setItem(V.value,n),S(t,n))}}catch(e){p(e)}}(e),{flush:c,deep:s,eventFilter:v});(0,o.watch)(V,()=>D(),{flush:c});let B=!1;const w=e=>{f&&!B||D(e.detail)};function S(e,t){if(m){const n={key:V.value,oldValue:e,newValue:t,storageArea:l};m.dispatchEvent(l instanceof Storage?new StorageEvent('storage',n):new CustomEvent(G,{detail:n}))}}function D(e){if(!e||e.storageArea===l)if(e&&null==e.key)b.value=N;else if(!e||e.key===V.value){g();try{const t=E.write(b.value);void 0!==e&&(null==e?void 0:e.newValue)===t||(b.value=function(e){const t=e?e.newValue:l.getItem(V.value);if(null==t)return i&&null!=N&&l.setItem(V.value,E.write(N)),N;if(!e&&d){const e=E.read(t);return'function'==typeof d?d(e,N):'object'!==k||Array.isArray(e)?e:{...N,...e}}return'string'!=typeof t?t:E.read(t)}(e))}catch(e){p(e)}finally{e?(0,o.nextTick)(h):h()}}}return m&&r&&(l instanceof Storage?A(m,'storage',e=>{f&&!B||D(e)},{passive:!0}):A(m,G,w)),f?function(e,t=!0,l){y(l)?(0,o.onMounted)(e,l):t?e():(0,o.nextTick)(e)}(()=>{B=!0,D()}):D(),b}function W(e,t,l={}){const{window:n=I}=l;return J(e,t,null==n?void 0:n.localStorage,l)}Number.POSITIVE_INFINITY;const H=(Y=M,'message'!==(Z={type:'message',message_id:getCurrentMessageId()}).type||void 0!==Z.message_id&&'latest'!==Z.message_id||(Z.message_id=-1),l(`mvu_data.${_(Z).entries().sortBy(e=>e[0]).map(e=>e[1]).join('.')}`,errorCatched(()=>{const e=_.get(getVariables(Z),'stat_data',{}),t=Y.safeParse(e),l=(0,o.ref)(t.success?t.data:{});B(()=>{const e=_.get(getVariables(Z),'stat_data',{}),t=Y.safeParse(e);t.error||(_.isEqual(l.value,t.data)||n(()=>{l.value=t.data}),_.isEqual(e,t.data)||updateVariablesWith(e=>_.set(e,'stat_data',t.data),Z))},2e3);const{ignoreUpdates:n}=w(l,e=>{const t=Y.safeParse(e);t.error||(_.isEqual(e,t.data)||n(()=>{l.value=t.data}),updateVariablesWith(e=>_.set(e,'stat_data',t.data),Z))},{deep:!0});return{data:l}})));var Y,Z;const K=l('ui',()=>{const e=W('system-view-mode','hostOnly'),t=W('system-input-mode','append'),l=W('system-collapsed-panels',{host:!1,body:!1,psych:!1,task:!1,shop:!1,inventory:!1,control:!1}),n=W('system-active-tab','host'),a=W('system-dark-mode',!1),c=(0,o.computed)(()=>'full'===e.value);return(0,o.watchEffect)(()=>{a.value?document.documentElement.setAttribute('data-theme','dark'):document.documentElement.removeAttribute('data-theme')}),{viewMode:e,inputMode:t,activeTab:n,darkMode:a,isFullMode:c,toggleViewMode:function(){e.value='hostOnly'===e.value?'full':'hostOnly'},setActiveTab:function(e){n.value=e},setInputMode:function(e){t.value=e},togglePanel:function(e){l.value[e]=!l.value[e]},isPanelCollapsed:function(e){return l.value[e]??!1},toggleDarkMode:function(){a.value=!a.value},sendToChat:function(e){const $=window.parent.$;switch(t.value){case'send':triggerSlash(`/send ${e}|/trigger`);break;case'input':triggerSlash(`/setinput ${e}`);break;case'append':const t=$('#send_textarea').val()||'';triggerSlash(`/setinput ${t?`${t}\n${e}`:e}`)}},sendToChatDirect:function(e){triggerSlash(`/send ${e}`)}}}),Q={class:'system-header'},X={class:'header-left'},ee={class:'brand-row'},te={class:'status-block'},le={class:'status-value mono'},ne={class:'ticker'},ae={class:'ticker-track'},oe={class:'header-right'},ce={class:'status-block'},se={class:'status-value'},re={class:'status-block'},ie={class:'status-value'},de={class:'log-strip'},ue={class:'log-text'},me={class:'stat-item'},ve={class:'stat-value'},pe={key:0,class:'stat-item'},fe={class:'stat-value'},be=(0,o.defineComponent)({__name:'SystemHeader',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data),a=(0,o.ref)('00:00:00'),c=(0,o.ref)('同步准备'),s=(0,o.ref)(''),r=(0,o.ref)(!1),d=['系统联机','信号稳定','数据同步完成','监控运行中'];let u=null,m=null,v=null,p=null,f=null;const b=['同步准备','变量校验','接口就绪','监听开启','状态稳定'];let V=0;function N(e){return e.toString().padStart(2,'0')}function k(){const e=new Date;a.value=`${N(e.getHours())}:${N(e.getMinutes())}:${N(e.getSeconds())}`}function E(){const e=function(){const e=Math.floor(Math.random()*d.length);return d[e]}();r.value=!0,s.value='';let t=0;v&&clearInterval(v),f&&clearInterval(f),v=setInterval(()=>{t+=1,s.value=e.slice(0,t),t>=e.length&&(v&&clearInterval(v),p=setTimeout(g,1800))},110)}function g(){f&&clearInterval(f),f=setInterval(()=>{s.value.length>0?s.value=s.value.slice(0,-1):(f&&clearInterval(f),r.value=!1,p=setTimeout(E,900))},70)}return(0,o.onMounted)(()=>{k(),u=setInterval(k,1e3),m=setInterval(()=>{V=(V+1)%b.length,c.value=b[V]},2800),E()}),(0,o.onBeforeUnmount)(()=>{u&&clearInterval(u),m&&clearInterval(m),v&&clearInterval(v),p&&clearTimeout(p),f&&clearInterval(f)}),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Q,[t[8]||(t[8]=(0,o.createElementVNode)('div',{class:'scanline'},null,-1)),(0,o.createElementVNode)('div',X,[(0,o.createElementVNode)('div',ee,[t[0]||(t[0]=(0,o.createElementVNode)('span',{class:'brand-icon'},'[■]',-1)),(0,o.createVNode)(i,{text:'系统在线','auto-glitch':!0})]),(0,o.createElementVNode)('div',te,[t[1]||(t[1]=(0,o.createElementVNode)('div',{class:'status-label'},'系统时钟',-1)),(0,o.createElementVNode)('div',le,(0,o.toDisplayString)((0,o.unref)(a)),1)]),t[2]||(t[2]=(0,o.createElementVNode)('div',{class:'rainbow-bar'},null,-1)),(0,o.createElementVNode)('div',ne,[(0,o.createElementVNode)('div',ae,[(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['typewriter',{active:(0,o.unref)(r)}])},(0,o.toDisplayString)((0,o.unref)(s)),3)])])]),(0,o.createElementVNode)('div',oe,[(0,o.createElementVNode)('div',ce,[t[3]||(t[3]=(0,o.createElementVNode)('div',{class:'status-label'},'当前日期',-1)),(0,o.createElementVNode)('div',se,(0,o.toDisplayString)((0,o.unref)(n).系统.当前日期),1)]),(0,o.createElementVNode)('div',re,[t[4]||(t[4]=(0,o.createElementVNode)('div',{class:'status-label'},'当前时间',-1)),(0,o.createElementVNode)('div',ie,(0,o.toDisplayString)((0,o.unref)(n).系统.当前时间),1)]),(0,o.createElementVNode)('div',de,[t[5]||(t[5]=(0,o.createElementVNode)('span',{class:'log-label'},'LOG>',-1)),(0,o.createElementVNode)('span',ue,(0,o.toDisplayString)((0,o.unref)(c)),1)]),(0,o.createElementVNode)('div',me,[t[6]||(t[6]=(0,o.createElementVNode)('span',{class:'stat-label'},'积分',-1)),(0,o.createElementVNode)('span',ve,(0,o.toDisplayString)((0,o.unref)(n).系统.积分),1)]),(0,o.unref)(l).isFullMode?((0,o.openBlock)(),(0,o.createElementBlock)('div',pe,[t[7]||(t[7]=(0,o.createElementVNode)('span',{class:'stat-label'},'羁绊完成人数',-1)),(0,o.createElementVNode)('span',fe,(0,o.toDisplayString)((0,o.unref)(n).系统.羁绊完成人数),1)])):(0,o.createCommentVNode)('v-if',!0)])]))}}),Ve=(0,r.A)(be,[['__scopeId','data-v-703cdc2f']]),Ne=Ve,ke={class:'card-title'},Ee={key:0,class:'card-body'},ge=(0,o.defineComponent)({__name:'CyberCard',props:{title:{},collapsed:{type:Boolean}},emits:['toggle'],setup:e=>(t,l)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['cyber-card',{collapsed:e.collapsed}])},[(0,o.createElementVNode)('div',{class:'card-header',onClick:l[0]||(l[0]=e=>t.$emit('toggle'))},[l[1]||(l[1]=(0,o.createElementVNode)('span',{class:'card-icon'},'▣',-1)),(0,o.createElementVNode)('span',ke,(0,o.toDisplayString)(e.title),1),(0,o.createElementVNode)('span',{class:(0,o.normalizeClass)(['card-arrow',{rotated:!e.collapsed}])},'▶',2)]),(0,o.createVNode)(o.Transition,{name:'card-expand'},{default:(0,o.withCtx)(()=>[e.collapsed?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('div',Ee,[(0,o.renderSlot)(t.$slots,'default')]))]),_:3})],2))}),ye=(0,r.A)(ge,[['__scopeId','data-v-6fa4f3e4']]),he=ye,Ce={class:'host-info'},Be={class:'info-row'},we={class:'value'},Se={class:'info-row'},ze={class:'value'},De={class:'info-row'},_e={class:'value'},Te={class:'personality-block'},xe={class:'personality-list'},Me={class:'p-row'},$e={class:'p-value'},Ie={class:'p-row'},je={class:'p-value'},Ae={class:'p-row'},Ue={class:'p-value'},Pe={class:'p-row'},qe={class:'p-value'},Fe={key:0,class:'core-section'},Oe={class:'core-content'},Le={key:0,class:'secret-section'},Re={class:'secret-content'},Ge=(0,o.defineComponent)({__name:'HostPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data);return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(he,{title:'宿主信息',collapsed:(0,o.unref)(l).isPanelCollapsed('host'),onToggle:t[0]||(t[0]=e=>(0,o.unref)(l).togglePanel('host'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',Ce,[(0,o.createElementVNode)('div',Be,[t[1]||(t[1]=(0,o.createElementVNode)('span',{class:'label'},'姓名',-1)),(0,o.createElementVNode)('span',we,(0,o.toDisplayString)((0,o.unref)(n).宿主.姓名||'未知'),1)]),(0,o.createElementVNode)('div',Se,[t[2]||(t[2]=(0,o.createElementVNode)('span',{class:'label'},'性别',-1)),(0,o.createElementVNode)('span',ze,(0,o.toDisplayString)((0,o.unref)(n).宿主.性别||'未知'),1)]),(0,o.createElementVNode)('div',De,[t[3]||(t[3]=(0,o.createElementVNode)('span',{class:'label'},'年龄',-1)),(0,o.createElementVNode)('span',_e,(0,o.toDisplayString)((0,o.unref)(n).宿主.年龄??'未知'),1)]),(0,o.createElementVNode)('div',Te,[t[9]||(t[9]=(0,o.createElementVNode)('div',{class:'section-title'},'性格分析',-1)),(0,o.createElementVNode)('div',xe,[(0,o.createElementVNode)('div',Me,[t[4]||(t[4]=(0,o.createElementVNode)('span',{class:'p-label'},'主导',-1)),(0,o.createElementVNode)('span',$e,(0,o.toDisplayString)((0,o.unref)(n).宿主.性格.荣格八维.主导||'-'),1)]),(0,o.createElementVNode)('div',Ie,[t[5]||(t[5]=(0,o.createElementVNode)('span',{class:'p-label'},'辅助',-1)),(0,o.createElementVNode)('span',je,(0,o.toDisplayString)((0,o.unref)(n).宿主.性格.荣格八维.辅助||'-'),1)]),(0,o.createElementVNode)('div',Ae,[t[6]||(t[6]=(0,o.createElementVNode)('span',{class:'p-label'},'第三',-1)),(0,o.createElementVNode)('span',Ue,(0,o.toDisplayString)((0,o.unref)(n).宿主.性格.荣格八维.第三||'-'),1)]),(0,o.createElementVNode)('div',Pe,[t[7]||(t[7]=(0,o.createElementVNode)('span',{class:'p-label'},'劣势',-1)),(0,o.createElementVNode)('span',qe,(0,o.toDisplayString)((0,o.unref)(n).宿主.性格.荣格八维.劣势||'-'),1)])]),(0,o.unref)(n).宿主.性格.核心特征?((0,o.openBlock)(),(0,o.createElementBlock)('div',Fe,[t[8]||(t[8]=(0,o.createElementVNode)('div',{class:'section-title'},'核心特征',-1)),(0,o.createElementVNode)('div',Oe,(0,o.toDisplayString)((0,o.unref)(n).宿主.性格.核心特征),1)])):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createVNode)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(l).isFullMode&&(0,o.unref)(n).宿主.隐藏秘密?((0,o.openBlock)(),(0,o.createElementBlock)('div',Le,[t[10]||(t[10]=(0,o.createElementVNode)('div',{class:'section-title secret'},'隐藏秘密',-1)),(0,o.createElementVNode)('div',Re,(0,o.toDisplayString)((0,o.unref)(n).宿主.隐藏秘密),1)])):(0,o.createCommentVNode)('v-if',!0)]),_:1})])]),_:1},8,['collapsed']))}}),Je=(0,r.A)(Ge,[['__scopeId','data-v-15133887']]),We={class:'neon-progress'},He={key:0,class:'progress-label'},Ye={class:'progress-track'},Ze={class:'progress-value'},Ke=(0,o.defineComponent)({__name:'NeonProgress',props:{value:{},max:{},label:{}},setup(e){const t=e,l=(0,o.computed)(()=>Math.min(100,Math.max(0,t.value/t.max*100)));return(t,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',We,[e.label?((0,o.openBlock)(),(0,o.createElementBlock)('div',He,(0,o.toDisplayString)(e.label),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Ye,[(0,o.createElementVNode)('div',{class:'progress-fill',style:(0,o.normalizeStyle)({width:(0,o.unref)(l)+'%'})},null,4),(0,o.createElementVNode)('div',{class:'progress-glow',style:(0,o.normalizeStyle)({width:(0,o.unref)(l)+'%'})},null,4)]),(0,o.createElementVNode)('div',Ze,(0,o.toDisplayString)(e.value)+'/'+(0,o.toDisplayString)(e.max),1)]))}}),Qe=(0,r.A)(Ke,[['__scopeId','data-v-20588dfa']]),Xe={class:'psych-info'},et={class:'info-row'},tt={class:'value'},lt={class:'shame-section'},nt=(0,o.defineComponent)({__name:'PsychPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data);return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(l).isFullMode?((0,o.openBlock)(),(0,o.createBlock)(he,{key:0,title:'心理状态',collapsed:(0,o.unref)(l).isPanelCollapsed('psych'),onToggle:t[0]||(t[0]=e=>(0,o.unref)(l).togglePanel('psych'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',Xe,[(0,o.createElementVNode)('div',et,[t[1]||(t[1]=(0,o.createElementVNode)('span',{class:'label'},'对系统态度',-1)),(0,o.createElementVNode)('span',tt,(0,o.toDisplayString)((0,o.unref)(n).心理.对系统态度),1)]),(0,o.createElementVNode)('div',lt,[(0,o.createVNode)(Qe,{label:'羁绊值',value:(0,o.unref)(n).心理.羁绊值,max:100},null,8,['value'])])])]),_:1},8,['collapsed'])):(0,o.createCommentVNode)('v-if',!0)]),_:1}))}}),at=(0,r.A)(nt,[['__scopeId','data-v-428b1c66']]),ot={class:'body-info'},ct={class:'clothing-section'},st={class:'clothing-item'},rt={class:'c-value'},it={class:'clothing-item'},dt={class:'c-value'},ut={class:'clothing-item'},mt={class:'c-value'},vt={key:0,class:'clothing-item'},pt={class:'c-value'},ft={class:'clothing-item'},bt={class:'c-value'},Vt={class:'virginity-list'},Nt={class:'v-icon'},kt={key:0,class:'v-note'},Et={class:'v-icon'},gt={key:0,class:'v-note'},yt={class:'v-icon'},ht={key:0,class:'v-note'},Ct={class:'v-icon'},Bt={key:0,class:'v-note'},wt={class:'realtime-list'},St={key:0,class:'rt-item'},zt={class:'rt-value'},Dt={key:1,class:'rt-item'},_t={class:'rt-value'},Tt={key:2,class:'rt-item'},xt={class:'rt-value'},Mt={key:3,class:'rt-item'},$t={class:'rt-value'},It={key:4,class:'rt-item'},jt={class:'rt-value'},At={key:5,class:'rt-item'},Ut={class:'rt-value'},Pt={key:6,class:'rt-item'},qt={class:'rt-value'},Ft={key:7,class:'rt-item'},Ot={class:'rt-value'},Lt=(0,o.defineComponent)({__name:'BodyPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data),a=(0,o.computed)(()=>String(n.value.身体?.性别??n.value.宿主?.性别??'').trim()),c=(0,o.computed)(()=>a.value.includes('男')),s=(0,o.computed)(()=>a.value.includes('女')),r=(0,o.computed)(()=>a.value.includes('双性')),i=(0,o.computed)(()=>c.value&&!s.value&&!r.value),d=(0,o.computed)(()=>s.value&&!c.value&&!r.value),u=(0,o.computed)(()=>r.value||i.value||!i.value&&!d.value),m=(0,o.computed)(()=>r.value||d.value||!i.value&&!d.value);function v(e){return null==e?'·':e?'□':'■'}function p(e){return{lost:!1===e,unknown:null==e}}function f(e){return e??'未知'}function b(e){return e??'未知'}return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(l).isFullMode?((0,o.openBlock)(),(0,o.createBlock)(he,{key:0,title:'身体状态',collapsed:(0,o.unref)(l).isPanelCollapsed('body'),onToggle:t[0]||(t[0]=e=>(0,o.unref)(l).togglePanel('body'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',ot,[t[18]||(t[18]=(0,o.createElementVNode)('div',{class:'section-title'},'穿着',-1)),(0,o.createElementVNode)('div',ct,[(0,o.createElementVNode)('div',st,[t[1]||(t[1]=(0,o.createElementVNode)('span',{class:'c-label'},'上衣',-1)),(0,o.createElementVNode)('span',rt,(0,o.toDisplayString)(b((0,o.unref)(n).身体.穿着.上衣)),1)]),(0,o.createElementVNode)('div',it,[t[2]||(t[2]=(0,o.createElementVNode)('span',{class:'c-label'},'下装',-1)),(0,o.createElementVNode)('span',dt,(0,o.toDisplayString)(b((0,o.unref)(n).身体.穿着.下装)),1)]),(0,o.createElementVNode)('div',ut,[t[3]||(t[3]=(0,o.createElementVNode)('span',{class:'c-label'},'足部',-1)),(0,o.createElementVNode)('span',mt,(0,o.toDisplayString)(b((0,o.unref)(n).身体.穿着.足部)),1)]),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',vt,[t[4]||(t[4]=(0,o.createElementVNode)('span',{class:'c-label'},'内衣',-1)),(0,o.createElementVNode)('span',pt,(0,o.toDisplayString)(b((0,o.unref)(n).身体.穿着.内衣)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',ft,[t[5]||(t[5]=(0,o.createElementVNode)('span',{class:'c-label'},'内裤',-1)),(0,o.createElementVNode)('span',bt,(0,o.toDisplayString)(b((0,o.unref)(n).身体.穿着.内裤)),1)])]),t[19]||(t[19]=(0,o.createElementVNode)('div',{class:'section-title'},'贞操状态',-1)),(0,o.createElementVNode)('div',Vt,[(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['v-item',p((0,o.unref)(n).身体.贞操状态.处女)])},[(0,o.createElementVNode)('span',Nt,(0,o.toDisplayString)(v((0,o.unref)(n).身体.贞操状态.处女)),1),t[6]||(t[6]=(0,o.createElementVNode)('span',{class:'v-label'},'处女',-1)),null===(0,o.unref)(n).身体.贞操状态.处女?((0,o.openBlock)(),(0,o.createElementBlock)('span',kt,'未知')):(0,o.createCommentVNode)('v-if',!0)],2)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:1,class:(0,o.normalizeClass)(['v-item',p((0,o.unref)(n).身体.贞操状态.口腔处女)])},[(0,o.createElementVNode)('span',Et,(0,o.toDisplayString)(v((0,o.unref)(n).身体.贞操状态.口腔处女)),1),t[7]||(t[7]=(0,o.createElementVNode)('span',{class:'v-label'},'口腔处女',-1)),null===(0,o.unref)(n).身体.贞操状态.口腔处女?((0,o.openBlock)(),(0,o.createElementBlock)('span',gt,'未知')):(0,o.createCommentVNode)('v-if',!0)],2)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:2,class:(0,o.normalizeClass)(['v-item',p((0,o.unref)(n).身体.贞操状态.肛门处女)])},[(0,o.createElementVNode)('span',yt,(0,o.toDisplayString)(v((0,o.unref)(n).身体.贞操状态.肛门处女)),1),t[8]||(t[8]=(0,o.createElementVNode)('span',{class:'v-label'},'肛门处女',-1)),null===(0,o.unref)(n).身体.贞操状态.肛门处女?((0,o.openBlock)(),(0,o.createElementBlock)('span',ht,'未知')):(0,o.createCommentVNode)('v-if',!0)],2)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:3,class:(0,o.normalizeClass)(['v-item',p((0,o.unref)(n).身体.贞操状态.阴茎处男)])},[(0,o.createElementVNode)('span',Ct,(0,o.toDisplayString)(v((0,o.unref)(n).身体.贞操状态.阴茎处男)),1),t[9]||(t[9]=(0,o.createElementVNode)('span',{class:'v-label'},'阴茎处男',-1)),null===(0,o.unref)(n).身体.贞操状态.阴茎处男?((0,o.openBlock)(),(0,o.createElementBlock)('span',Bt,'未知')):(0,o.createCommentVNode)('v-if',!0)],2)):(0,o.createCommentVNode)('v-if',!0)]),t[20]||(t[20]=(0,o.createElementVNode)('div',{class:'section-title'},'即时状态',-1)),(0,o.createElementVNode)('div',wt,[(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',St,[t[10]||(t[10]=(0,o.createElementVNode)('span',{class:'rt-label'},'小穴',-1)),(0,o.createElementVNode)('span',zt,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.小穴)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Dt,[t[11]||(t[11]=(0,o.createElementVNode)('span',{class:'rt-label'},'子宫',-1)),(0,o.createElementVNode)('span',_t,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.子宫)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Tt,[t[12]||(t[12]=(0,o.createElementVNode)('span',{class:'rt-label'},'屁穴',-1)),(0,o.createElementVNode)('span',xt,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.屁穴)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Mt,[t[13]||(t[13]=(0,o.createElementVNode)('span',{class:'rt-label'},'体液',-1)),(0,o.createElementVNode)('span',$t,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.体液)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',It,[t[14]||(t[14]=(0,o.createElementVNode)('span',{class:'rt-label'},'阴茎',-1)),(0,o.createElementVNode)('span',jt,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.阴茎)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',At,[t[15]||(t[15]=(0,o.createElementVNode)('span',{class:'rt-label'},'前列腺',-1)),(0,o.createElementVNode)('span',Ut,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.前列腺)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Pt,[t[16]||(t[16]=(0,o.createElementVNode)('span',{class:'rt-label'},'尿道',-1)),(0,o.createElementVNode)('span',qt,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.尿道)),1)])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ft,[t[17]||(t[17]=(0,o.createElementVNode)('span',{class:'rt-label'},'精液',-1)),(0,o.createElementVNode)('span',Ot,(0,o.toDisplayString)(f((0,o.unref)(n).身体.即时状态.精液)),1)])):(0,o.createCommentVNode)('v-if',!0)])])]),_:1},8,['collapsed'])):(0,o.createCommentVNode)('v-if',!0)]),_:1}))}}),Rt=(0,r.A)(Lt,[['__scopeId','data-v-43921151']]),Gt={class:'corruption-list'},Jt={key:0,class:'empty-state'},Wt={class:'type'},Ht={class:'count'},Yt=(0,o.defineComponent)({__name:'CorruptionPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data);return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(l).isFullMode?((0,o.openBlock)(),(0,o.createBlock)(he,{key:0,title:'堕落记录',collapsed:(0,o.unref)(l).isPanelCollapsed('corruption'),onToggle:t[0]||(t[0]=e=>(0,o.unref)(l).togglePanel('corruption'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',Gt,[0===Object.keys((0,o.unref)(n).堕落计数).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',Jt,' 暂无记录 ')):((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:1},(0,o.renderList)((0,o.unref)(n).堕落计数,(e,l)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:l,class:'corruption-item'},[(0,o.createElementVNode)('span',Wt,(0,o.toDisplayString)(l),1),t[1]||(t[1]=(0,o.createElementVNode)('span',{class:'dots'},null,-1)),(0,o.createElementVNode)('span',Ht,(0,o.toDisplayString)(e),1)]))),128))])]),_:1},8,['collapsed'])):(0,o.createCommentVNode)('v-if',!0)]),_:1}))}}),Zt=(0,r.A)(Yt,[['__scopeId','data-v-c995ecb2']]),Kt={key:0,class:'inline-toast'},Qt={class:'task-header'},Xt={class:'task-title'},el={class:'task-actions'},tl=['disabled'],ll={class:'task-desc'},nl={class:'task-condition'},al={key:0,class:'task-limit'},ol={key:1,class:'task-penalty'},cl={class:'task-reward'},sl={key:0,class:'section-title'},rl={class:'task-header'},il={class:'task-title'},dl={class:'task-actions'},ul=['onClick'],ml=['disabled','onClick'],vl=['onClick'],pl={class:'task-desc'},fl={class:'task-condition'},bl={key:0,class:'task-limit'},Vl={key:1,class:'task-penalty'},Nl={class:'task-reward'},kl={class:'action-row'},El={key:0,class:'modal-overlay'},gl={class:'modal-content'},yl={class:'form-group'},hl={class:'form-group'},Cl={class:'form-group'},Bl={class:'form-group'},wl={class:'form-group'},Sl={class:'form-group'},zl={class:'form-group'},Dl={class:'quick-row'},_l={class:'form-group'},Tl={class:'reward-items'},xl=['onUpdate:modelValue'],Ml=['onUpdate:modelValue'],$l=['onClick'],Il={class:'modal-actions'},jl={key:1,class:'modal-overlay'},Al={class:'modal-content'},Ul={class:'form-group'},Pl={class:'form-group'},ql={class:'form-group'},Fl={class:'form-group'},Ol={class:'form-group'},Ll={class:'form-group'},Rl={class:'quick-row'},Gl={class:'form-group'},Jl={class:'reward-items'},Wl=['onUpdate:modelValue'],Hl=['onUpdate:modelValue'],Yl=['onClick'],Zl={key:2,class:'modal-overlay'},Kl={key:3,class:'modal-overlay'},Ql={class:'modal-content confirm'},Xl={class:'confirm-text'},en={key:0},tn={key:0,class:'checkbox-row'},ln=(0,o.defineComponent)({__name:'TaskPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data),a=(0,o.ref)(!1),c=(0,o.ref)(!1),s=(0,o.ref)('');let r=null;const i=(0,o.ref)({type:'main',title:'',desc:'',condition:'',penalty:'',timeLimit:'',reward:0,items:[]}),d=(0,o.ref)({title:'',desc:'',condition:'',penalty:'',timeLimit:'',reward:0,items:[]}),u=(0,o.ref)({visible:!1,type:'main'}),m=(0,o.ref)({visible:!1,type:'main'}),v=(0,o.ref)({visible:!1,type:'main',title:'',reward:0}),p=(0,o.ref)(!1),f=(0,o.ref)(''),b={标题:'待发布',描述:'暂无',条件:'暂无',失败惩罚:null,时间限制:null,奖励:{积分:0,物品:{}},完成:!1};function V(e){s.value=e,r&&clearTimeout(r),r=setTimeout(()=>{s.value=''},1800)}function N(e){const t=(i.value.reward??0)+e;i.value.reward=Math.max(0,t)}function k(e){const t=(d.value.reward??0)+e;d.value.reward=Math.max(0,t)}function E(e){e.push({name:'',count:1})}function g(e,t){e.splice(t,1)}function y(e){const t={};return e.forEach(e=>{const l=e.name.trim(),n=Math.max(0,Number(e.count)||0);!l||n<=0||(t[l]=(t[l]??0)+n)}),t}function h(e){const t=e.奖励??{积分:0,物品:{}},l=[],n=Number(t.积分??0);if(n>0&&l.push(`${n} 积分`),t.物品&&Object.keys(t.物品).length>0){const e=Object.entries(t.物品).map(([e,t])=>`${e} x${t}`).join('、');l.push(`物品 ${e}`)}return l.length>0?l.join(' / '):'无'}function C(){l.sendToChat('Request: AI需要随机生成一条符合现状的支线任务并发布然后更新变量'),V('已发送随机支线请求')}function B(e,t){m.value={visible:!0,type:e,key:t}}function w(){m.value.visible=!1}function S(){'main'===m.value.type?(t.data.任务.主线={...b},V('主线任务已清空')):m.value.key&&(delete t.data.任务.支线[m.value.key],V('支线任务已删除')),w()}function D(e,l){const n='main'===e?t.data.任务.主线:t.data.任务.支线[l??''];var a;n&&(u.value={visible:!0,type:e,key:l},d.value={title:n.标题??'',desc:n.描述??'',condition:n.条件??'',penalty:n.失败惩罚??'',timeLimit:n.时间限制??'',reward:Number(n.奖励?.积分??0),items:(a=n.奖励?.物品,a?Object.entries(a).map(([e,t])=>({name:e,count:t})):[])})}function T(){u.value.visible=!1}function x(){if(!d.value.title)return void V('请输入任务标题');const{type:e,key:n}=u.value,a='main'===e?t.data.任务.主线:t.data.任务.支线[n??''];if(!a)return void T();const o=a.标题??'',c=a.描述??'',s=a.条件??'',r=a.失败惩罚??'',i=a.时间限制??'',m=Number(a.奖励?.积分??0);a.标题=d.value.title,a.描述=d.value.desc,a.条件=d.value.condition,a.失败惩罚=d.value.penalty?d.value.penalty:null,a.时间限制=d.value.timeLimit?d.value.timeLimit:null;const v=y(d.value.items),p=Math.max(0,Number(d.value.reward)||0),f={积分:p,物品:v};a.奖励=f;const b=[];a.标题!==o&&b.push(`标题：${o||'无'}→${a.标题}`),a.描述!==c&&b.push(`描述：${c||'无'}→${a.描述}`),a.条件!==s&&b.push(`条件：${s||'无'}→${a.条件}`),(a.失败惩罚??'')!==r&&b.push(`失败惩罚：${r||'无'}→${a.失败惩罚??'无'}`),(a.时间限制??'')!==i&&b.push(`时间限制：${i||'无'}→${a.时间限制??'无'}`),p!==m&&b.push(`奖励积分：${m}→${p}`),b.length>0&&l.sendToChat(`【系统提示】${'main'===e?'主线':'支线'}任务信息已更新，宿主可以查看。修改内容：${b.join('，')}（AI本次无需更新此任务的相关变量，除非宿主完成此任务）`),V('任务已更新'),T()}function M(e,l){const n='main'===e?t.data.任务.主线:t.data.任务.支线[l??''];n&&(v.value={visible:!0,type:e,key:l,title:n.标题||('main'===e?'主线':'支线'),reward:Number(n.奖励?.积分??0)},p.value=!1)}function I(){v.value.visible=!1}function j(){const{type:e,key:n}=v.value,a='main'===e?t.data.任务.主线:t.data.任务.支线[n??''];if(!a||a.完成)return void I();a.完成=!0;const o=Number(a.奖励?.积分??0);if(o>0){const e=Number(t.data.系统.积分??0);t.data.系统.积分=Math.min(99999,Math.max(0,e+o))}!function(e){f.value=e,setTimeout(()=>{f.value===e&&(f.value='')},380)}('main'===e?'main':`side:${n}`),l.sendToChat(`【系统提示】${a.标题||('main'===e?'主线':'支线')}任务已完成，奖励已发放（AI本次无需更新此任务相关变量）`),'main'===e&&p.value&&l.sendToChatDirect('【选择器】'),setTimeout(()=>{'main'===e?t.data.任务.主线={...b}:n&&delete t.data.任务.支线[n]},320),V('任务已完成并清空'),I()}function A(){i.value.title?c.value||(c.value=!0,setTimeout(()=>{const e=y(i.value.items),n={积分:Math.max(0,Number(i.value.reward)||0),物品:e},o={标题:i.value.title,描述:i.value.desc,条件:i.value.condition,失败惩罚:i.value.penalty?i.value.penalty:null,时间限制:i.value.timeLimit?i.value.timeLimit:null,奖励:n,完成:!1};if('main'===i.value.type)t.data.任务.主线=o;else{const e=`side_${Date.now()}`;t.data.任务.支线[e]=o}const s=function(e){const t=[],l=Number(e.积分??0);if(l>0&&t.push(`奖励积分 ${l}`),e.物品&&Object.keys(e.物品).length>0){const l=Object.entries(e.物品).map(([e,t])=>`${e} x${t}`).join('、');t.push(`奖励物品 ${l}`)}return t.length>0?t.join('，'):'奖励无'}(o.奖励);l.sendToChat(`【系统提示】有新任务可执行，请查看任务面板。标题=${o.标题}，描述=${o.描述}，条件=${o.条件}，失败惩罚=${o.失败惩罚??'无'}，时间限制=${o.时间限制??'无'}，${s}（AI本次无需更新此任务的相关变量，除非宿主完成任务）`),a.value=!1,i.value={type:'main',title:'',desc:'',condition:'',penalty:'',timeLimit:'',reward:0,items:[]},c.value=!1,V('任务发布成功')},260)):V('请输入任务标题')}return(e,t)=>((0,o.openBlock)(),(0,o.createBlock)(he,{title:'任务面板',collapsed:(0,o.unref)(l).isPanelCollapsed('task'),onToggle:t[31]||(t[31]=e=>(0,o.unref)(l).togglePanel('task'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['task-panel',{'is-publishing':(0,o.unref)(c)}])},[(0,o.createVNode)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(s)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Kt,(0,o.toDisplayString)((0,o.unref)(s)),1)):(0,o.createCommentVNode)('v-if',!0)]),_:1}),t[55]||(t[55]=(0,o.createElementVNode)('div',{class:'section-title'},'主线任务',-1)),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['task-card main',{completing:'main'===(0,o.unref)(f)}])},[(0,o.createElementVNode)('div',Qt,[(0,o.createElementVNode)('div',Xt,(0,o.toDisplayString)((0,o.unref)(n).任务.主线.标题),1),(0,o.createElementVNode)('div',el,[(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:t[0]||(t[0]=e=>D('main'))},'编辑'),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn success-btn',disabled:(0,o.unref)(n).任务.主线.完成,onClick:t[1]||(t[1]=e=>M('main'))},(0,o.toDisplayString)((0,o.unref)(n).任务.主线.完成?'已完成':'完成'),9,tl),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:t[2]||(t[2]=e=>B('main'))},'删除')])]),(0,o.createElementVNode)('div',ll,(0,o.toDisplayString)((0,o.unref)(n).任务.主线.描述),1),(0,o.createElementVNode)('div',nl,'条件: '+(0,o.toDisplayString)((0,o.unref)(n).任务.主线.条件),1),(0,o.unref)(n).任务.主线.时间限制?((0,o.openBlock)(),(0,o.createElementBlock)('div',al,'时间限制: '+(0,o.toDisplayString)((0,o.unref)(n).任务.主线.时间限制),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(n).任务.主线.失败惩罚?((0,o.openBlock)(),(0,o.createElementBlock)('div',ol,'失败惩罚: '+(0,o.toDisplayString)((0,o.unref)(n).任务.主线.失败惩罚),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',cl,'奖励: '+(0,o.toDisplayString)(h((0,o.unref)(n).任务.主线)),1),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['task-status',{completed:(0,o.unref)(n).任务.主线.完成}])},(0,o.toDisplayString)((0,o.unref)(n).任务.主线.完成?'已完成':'进行中'),3)],2),Object.keys((0,o.unref)(n).任务.支线).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',sl,' 支线任务 ('+(0,o.toDisplayString)(Object.keys((0,o.unref)(n).任务.支线).length)+') ',1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['task-list',{'is-scroll':Object.keys((0,o.unref)(n).任务.支线).length>5}])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(n).任务.支线,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:(0,o.normalizeClass)(['task-card side',{completing:(0,o.unref)(f)===`side:${t}`}])},[(0,o.createElementVNode)('div',rl,[(0,o.createElementVNode)('div',il,(0,o.toDisplayString)(e.标题),1),(0,o.createElementVNode)('div',dl,[(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>D('side',t)},'编辑',8,ul),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn success-btn',disabled:e.完成,onClick:e=>M('side',t)},(0,o.toDisplayString)(e.完成?'已完成':'完成'),9,ml),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>B('side',t)},'删除',8,vl)])]),(0,o.createElementVNode)('div',pl,(0,o.toDisplayString)(e.描述),1),(0,o.createElementVNode)('div',fl,'条件: '+(0,o.toDisplayString)(e.条件),1),e.时间限制?((0,o.openBlock)(),(0,o.createElementBlock)('div',bl,'时间限制: '+(0,o.toDisplayString)(e.时间限制),1)):(0,o.createCommentVNode)('v-if',!0),e.失败惩罚?((0,o.openBlock)(),(0,o.createElementBlock)('div',Vl,'失败惩罚: '+(0,o.toDisplayString)(e.失败惩罚),1)):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',Nl,'奖励: '+(0,o.toDisplayString)(h(e)),1),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['task-status',{completed:e.完成}])},(0,o.toDisplayString)(e.完成?'已完成':'进行中'),3)],2))),128))],2),(0,o.createElementVNode)('div',kl,[(0,o.createElementVNode)('button',{class:'btn-3d publish-btn',onClick:t[3]||(t[3]=e=>a.value=!0)},'+ 发布任务'),(0,o.createElementVNode)('button',{class:'btn-3d publish-btn',onClick:C},'随机发布支线')]),((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{to:'#teleport-target'},[(0,o.unref)(a)?((0,o.openBlock)(),(0,o.createElementBlock)('div',El,[(0,o.createElementVNode)('div',gl,[t[41]||(t[41]=(0,o.createElementVNode)('div',{class:'modal-title'},'发布新任务',-1)),(0,o.createElementVNode)('div',yl,[t[33]||(t[33]=(0,o.createElementVNode)('label',null,'任务类型',-1)),(0,o.withDirectives)((0,o.createElementVNode)('select',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,o.unref)(i).type=e),class:'select-3d'},[...t[32]||(t[32]=[(0,o.createElementVNode)('option',{value:'main'},'主线',-1),(0,o.createElementVNode)('option',{value:'side'},'支线',-1)])],512),[[o.vModelSelect,(0,o.unref)(i).type]])]),(0,o.createElementVNode)('div',hl,[t[34]||(t[34]=(0,o.createElementVNode)('label',null,'标题',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,o.unref)(i).title=e),class:'input-3d',placeholder:'任务标题'},null,512),[[o.vModelText,(0,o.unref)(i).title]])]),(0,o.createElementVNode)('div',Cl,[t[35]||(t[35]=(0,o.createElementVNode)('label',null,'描述',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':t[6]||(t[6]=e=>(0,o.unref)(i).desc=e),class:'textarea-3d',placeholder:'任务描述'},null,512),[[o.vModelText,(0,o.unref)(i).desc]])]),(0,o.createElementVNode)('div',Bl,[t[36]||(t[36]=(0,o.createElementVNode)('label',null,'完成条件',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[7]||(t[7]=e=>(0,o.unref)(i).condition=e),class:'input-3d',placeholder:'完成条件'},null,512),[[o.vModelText,(0,o.unref)(i).condition]])]),(0,o.createElementVNode)('div',wl,[t[37]||(t[37]=(0,o.createElementVNode)('label',null,'失败惩罚（可选）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[8]||(t[8]=e=>(0,o.unref)(i).penalty=e),class:'input-3d',placeholder:'失败惩罚'},null,512),[[o.vModelText,(0,o.unref)(i).penalty]])]),(0,o.createElementVNode)('div',Sl,[t[38]||(t[38]=(0,o.createElementVNode)('label',null,'时间限制（可选）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[9]||(t[9]=e=>(0,o.unref)(i).timeLimit=e),class:'input-3d',placeholder:'时间限制'},null,512),[[o.vModelText,(0,o.unref)(i).timeLimit]])]),(0,o.createElementVNode)('div',zl,[t[39]||(t[39]=(0,o.createElementVNode)('label',null,'奖励积分（可选）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[10]||(t[10]=e=>(0,o.unref)(i).reward=e),class:'input-3d',type:'number',placeholder:'0'},null,512),[[o.vModelText,(0,o.unref)(i).reward,void 0,{number:!0}]]),(0,o.createElementVNode)('div',Dl,[(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[11]||(t[11]=e=>N(10))},'+10'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[12]||(t[12]=e=>N(50))},'+50'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[13]||(t[13]=e=>N(100))},'+100'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[14]||(t[14]=e=>N(-10))},'-10'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[15]||(t[15]=e=>N(-50))},'-50')])]),(0,o.createElementVNode)('div',_l,[t[40]||(t[40]=(0,o.createElementVNode)('label',null,'奖励物品（可选）',-1)),(0,o.createElementVNode)('div',Tl,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(i).items,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:'reward-item-row'},[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t=>e.name=t,class:'input-3d',placeholder:'物品名'},null,8,xl),[[o.vModelText,e.name]]),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t=>e.count=t,class:'input-3d reward-count',type:'number',min:'1'},null,8,Ml),[[o.vModelText,e.count,void 0,{number:!0}]]),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>g((0,o.unref)(i).items,t)},'删除',8,$l)]))),128)),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:t[16]||(t[16]=e=>E((0,o.unref)(i).items))},'+ 添加物品')])]),(0,o.createElementVNode)('div',Il,[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:t[17]||(t[17]=e=>a.value=!1)},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:A},'确认发布')])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(u).visible?((0,o.openBlock)(),(0,o.createElementBlock)('div',jl,[(0,o.createElementVNode)('div',Al,[t[49]||(t[49]=(0,o.createElementVNode)('div',{class:'modal-title'},'编辑任务',-1)),(0,o.createElementVNode)('div',Ul,[t[42]||(t[42]=(0,o.createElementVNode)('label',null,'标题',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[18]||(t[18]=e=>(0,o.unref)(d).title=e),class:'input-3d',placeholder:'任务标题'},null,512),[[o.vModelText,(0,o.unref)(d).title]])]),(0,o.createElementVNode)('div',Pl,[t[43]||(t[43]=(0,o.createElementVNode)('label',null,'描述',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':t[19]||(t[19]=e=>(0,o.unref)(d).desc=e),class:'textarea-3d',placeholder:'任务描述'},null,512),[[o.vModelText,(0,o.unref)(d).desc]])]),(0,o.createElementVNode)('div',ql,[t[44]||(t[44]=(0,o.createElementVNode)('label',null,'完成条件',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[20]||(t[20]=e=>(0,o.unref)(d).condition=e),class:'input-3d',placeholder:'完成条件'},null,512),[[o.vModelText,(0,o.unref)(d).condition]])]),(0,o.createElementVNode)('div',Fl,[t[45]||(t[45]=(0,o.createElementVNode)('label',null,'失败惩罚（可选）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[21]||(t[21]=e=>(0,o.unref)(d).penalty=e),class:'input-3d',placeholder:'失败惩罚'},null,512),[[o.vModelText,(0,o.unref)(d).penalty]])]),(0,o.createElementVNode)('div',Ol,[t[46]||(t[46]=(0,o.createElementVNode)('label',null,'时间限制（可选）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[22]||(t[22]=e=>(0,o.unref)(d).timeLimit=e),class:'input-3d',placeholder:'时间限制'},null,512),[[o.vModelText,(0,o.unref)(d).timeLimit]])]),(0,o.createElementVNode)('div',Ll,[t[47]||(t[47]=(0,o.createElementVNode)('label',null,'奖励积分（可选）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[23]||(t[23]=e=>(0,o.unref)(d).reward=e),class:'input-3d',type:'number',placeholder:'0'},null,512),[[o.vModelText,(0,o.unref)(d).reward,void 0,{number:!0}]]),(0,o.createElementVNode)('div',Rl,[(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[24]||(t[24]=e=>k(10))},'+10'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[25]||(t[25]=e=>k(50))},'+50'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[26]||(t[26]=e=>k(100))},'+100'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[27]||(t[27]=e=>k(-10))},'-10'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:t[28]||(t[28]=e=>k(-50))},'-50')])]),(0,o.createElementVNode)('div',Gl,[t[48]||(t[48]=(0,o.createElementVNode)('label',null,'奖励物品（可选）',-1)),(0,o.createElementVNode)('div',Jl,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(d).items,(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:t,class:'reward-item-row'},[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t=>e.name=t,class:'input-3d',placeholder:'物品名'},null,8,Wl),[[o.vModelText,e.name]]),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t=>e.count=t,class:'input-3d reward-count',type:'number',min:'1'},null,8,Hl),[[o.vModelText,e.count,void 0,{number:!0}]]),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>g((0,o.unref)(d).items,t)},'删除',8,Yl)]))),128)),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:t[29]||(t[29]=e=>E((0,o.unref)(d).items))},'+ 添加物品')])]),(0,o.createElementVNode)('div',{class:'modal-actions'},[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:T},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:x},'保存修改')])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(m).visible?((0,o.openBlock)(),(0,o.createElementBlock)('div',Zl,[(0,o.createElementVNode)('div',{class:'modal-content confirm'},[t[50]||(t[50]=(0,o.createElementVNode)('div',{class:'modal-title'},'确认删除',-1)),t[51]||(t[51]=(0,o.createElementVNode)('div',{class:'confirm-text'},'确定删除该任务吗？',-1)),(0,o.createElementVNode)('div',{class:'modal-actions'},[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:w},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:S},'确认删除')])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(v).visible?((0,o.openBlock)(),(0,o.createElementBlock)('div',Kl,[(0,o.createElementVNode)('div',Ql,[t[54]||(t[54]=(0,o.createElementVNode)('div',{class:'modal-title'},'确认完成',-1)),(0,o.createElementVNode)('div',Xl,[(0,o.createTextVNode)(' 确认标记'+(0,o.toDisplayString)((0,o.unref)(v).title)+'任务完成并发放奖励 ',1),(0,o.unref)(v).reward>0?((0,o.openBlock)(),(0,o.createElementBlock)('span',en,'（+'+(0,o.toDisplayString)((0,o.unref)(v).reward)+' 积分）',1)):(0,o.createCommentVNode)('v-if',!0),t[52]||(t[52]=(0,o.createTextVNode)('？ ',-1))]),'main'===(0,o.unref)(v).type?((0,o.openBlock)(),(0,o.createElementBlock)('label',tn,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[30]||(t[30]=e=>(0,o.isRef)(p)?p.value=e:null),type:'checkbox'},null,512),[[o.vModelCheckbox,(0,o.unref)(p)]]),t[53]||(t[53]=(0,o.createElementVNode)('span',null,'完成后立即脱离宿主并选择新宿主',-1))])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('div',{class:'modal-actions'},[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:I},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:j},'确认完成')])])])):(0,o.createCommentVNode)('v-if',!0)]))],2)]),_:1},8,['collapsed']))}}),nn=(0,r.A)(ln,[['__scopeId','data-v-7028f404']]),an={key:0,class:'inline-toast'},on={class:'item-header'},cn={class:'item-name'},sn={class:'item-actions'},rn={class:'item-price'},dn=['onClick'],un=['onClick'],mn={class:'item-desc'},vn={class:'item-stock'},pn={key:1,class:'empty-state'},fn={class:'action-row'},bn={key:0,class:'modal-overlay'},Vn={class:'modal-content'},Nn={class:'form-group'},kn={class:'form-group'},En={class:'form-group'},gn={class:'quick-row'},yn={class:'form-group'},hn={class:'modal-actions'},Cn={key:1,class:'modal-overlay'},Bn={class:'modal-content'},wn={class:'form-group'},Sn={class:'form-group'},zn={class:'form-group'},Dn={class:'quick-row'},_n={class:'form-group'},Tn={class:'modal-actions'},xn={key:2,class:'modal-overlay'},Mn=(0,o.defineComponent)({__name:'ShopPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data),a=(0,o.ref)(!1),c=(0,o.ref)(!1),s=(0,o.ref)(!1),r=(0,o.ref)('');let i=null;const d=(0,o.ref)({name:'',desc:'',price:0,stock:1}),u=(0,o.ref)({name:'',desc:'',price:0,stock:1}),m=(0,o.ref)(''),v=(0,o.ref)({visible:!1});function p(e){r.value=e,i&&clearTimeout(i),i=setTimeout(()=>{r.value=''},1800)}function f(e){const t=(d.value.price??0)+e;d.value.price=Math.max(0,t)}function b(e){const t=(u.value.price??0)+e;u.value.price=Math.max(0,t)}function V(){l.sendToChat('Request: AI需要随机生成一些商品上架到商城并更新变量'),p('已发送随机商品请求')}function N(){v.value.visible=!1}function k(){v.value.name&&(delete t.data.商城.在售[v.value.name],p('商品已删除')),N()}function E(){const e=m.value,n=u.value.name.trim();if(!e)return void(c.value=!1);if(!n)return void p('请输入商品名称');if(n!==e&&t.data.商城.在售[n])return void p('商品名称已存在');const a=t.data.商城.在售[e],o=e,s=a?.描述??'',r=Number(a?.价格??0),i=Number(a?.库存??0),d={描述:u.value.desc,价格:Math.max(0,Number(u.value.price)||0),库存:Math.max(0,Number(u.value.stock)||0)},v=[];n!==o&&v.push(`商品名：${o}→${n}`),d.描述!==s&&v.push(`介绍：${s||'暂无'}→${d.描述||'暂无'}`),d.价格!==r&&v.push(`价格：${r}→${d.价格}`),d.库存!==i&&v.push(`库存：${i}→${d.库存}`),n!==e&&delete t.data.商城.在售[e],t.data.商城.在售[n]=d,v.length>0&&l.sendToChat(`【系统提示】商品信息已更新，宿主可以查看。修改内容：${v.join('，')}（AI本次无需更新该商品的相关变量，除非宿主购买此商品）`),c.value=!1,p('商品已更新')}function g(){d.value.name?s.value||(s.value=!0,setTimeout(()=>{t.data.商城.在售[d.value.name]={描述:d.value.desc,价格:Math.max(0,Number(d.value.price)||0),库存:Math.max(0,Number(d.value.stock)||0)},l.sendToChat(`【系统提示】有新商品可购买，请查看商城。商品=${d.value.name}，介绍=${d.value.desc||'暂无'}，价格=${Math.max(0,Number(d.value.price)||0)} （AI本次无需重复更新该商品的相关变量，除非宿主购买此商品）`),a.value=!1,d.value={name:'',desc:'',price:0,stock:1},s.value=!1,p('商品上架成功')},260)):p('请输入商品名称')}return(e,i)=>((0,o.openBlock)(),(0,o.createBlock)(he,{title:'商城',collapsed:(0,o.unref)(l).isPanelCollapsed('shop'),onToggle:i[23]||(i[23]=e=>(0,o.unref)(l).togglePanel('shop'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['shop-panel',{'is-listing':(0,o.unref)(s)}])},[(0,o.createVNode)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>[(0,o.unref)(r)?((0,o.openBlock)(),(0,o.createElementBlock)('div',an,(0,o.toDisplayString)((0,o.unref)(r)),1)):(0,o.createCommentVNode)('v-if',!0)]),_:1}),Object.keys((0,o.unref)(n).商城.在售).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:0,class:(0,o.normalizeClass)(['shop-list',{'is-scroll':Object.keys((0,o.unref)(n).商城.在售).length>5}])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(n).商城.在售,(e,l)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:l,class:'shop-item'},[(0,o.createElementVNode)('div',on,[(0,o.createElementVNode)('div',cn,(0,o.toDisplayString)(l),1),(0,o.createElementVNode)('div',sn,[(0,o.createElementVNode)('div',rn,'¢'+(0,o.toDisplayString)(e.价格),1),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>function(e){const l=t.data.商城.在售[e];l&&(m.value=e,u.value={name:e,desc:l.描述??'',price:Number(l.价格??0),stock:Number(l.库存??0)},c.value=!0)}(l)},'编辑',8,dn),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>function(e){v.value={visible:!0,name:e}}(l)},'删除',8,un)])]),(0,o.createElementVNode)('div',mn,(0,o.toDisplayString)(e.描述),1),(0,o.createElementVNode)('div',vn,'库存: '+(0,o.toDisplayString)(e.库存),1)]))),128))],2)):((0,o.openBlock)(),(0,o.createElementBlock)('div',pn,'暂无商品')),(0,o.createElementVNode)('div',fn,[(0,o.createElementVNode)('button',{class:'btn-3d add-btn',onClick:i[0]||(i[0]=e=>a.value=!0)},'+ 上架商品'),(0,o.createElementVNode)('button',{class:'btn-3d add-btn',onClick:V},'随机上架商品')]),((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{to:'#teleport-target'},[(0,o.unref)(a)?((0,o.openBlock)(),(0,o.createElementBlock)('div',bn,[(0,o.createElementVNode)('div',Vn,[i[28]||(i[28]=(0,o.createElementVNode)('div',{class:'modal-title'},'上架新商品',-1)),(0,o.createElementVNode)('div',Nn,[i[24]||(i[24]=(0,o.createElementVNode)('label',null,'商品名称',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':i[1]||(i[1]=e=>(0,o.unref)(d).name=e),class:'input-3d',placeholder:'商品名称'},null,512),[[o.vModelText,(0,o.unref)(d).name]])]),(0,o.createElementVNode)('div',kn,[i[25]||(i[25]=(0,o.createElementVNode)('label',null,'商品描述',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':i[2]||(i[2]=e=>(0,o.unref)(d).desc=e),class:'textarea-3d',placeholder:'商品描述'},null,512),[[o.vModelText,(0,o.unref)(d).desc]])]),(0,o.createElementVNode)('div',En,[i[26]||(i[26]=(0,o.createElementVNode)('label',null,'价格（积分）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':i[3]||(i[3]=e=>(0,o.unref)(d).price=e),class:'input-3d',type:'number',placeholder:'0'},null,512),[[o.vModelText,(0,o.unref)(d).price,void 0,{number:!0}]]),(0,o.createElementVNode)('div',gn,[(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[4]||(i[4]=e=>f(5))},'+5'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[5]||(i[5]=e=>f(10))},'+10'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[6]||(i[6]=e=>f(20))},'+20'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[7]||(i[7]=e=>f(50))},'+50'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[8]||(i[8]=e=>f(-5))},'-5'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[9]||(i[9]=e=>f(-10))},'-10')])]),(0,o.createElementVNode)('div',yn,[i[27]||(i[27]=(0,o.createElementVNode)('label',null,'库存数量',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':i[10]||(i[10]=e=>(0,o.unref)(d).stock=e),class:'input-3d',type:'number',placeholder:'1'},null,512),[[o.vModelText,(0,o.unref)(d).stock,void 0,{number:!0}]])]),(0,o.createElementVNode)('div',hn,[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:i[11]||(i[11]=e=>a.value=!1)},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:g},'确认上架')])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(c)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Cn,[(0,o.createElementVNode)('div',Bn,[i[33]||(i[33]=(0,o.createElementVNode)('div',{class:'modal-title'},'修改商品',-1)),(0,o.createElementVNode)('div',wn,[i[29]||(i[29]=(0,o.createElementVNode)('label',null,'商品名称',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':i[12]||(i[12]=e=>(0,o.unref)(u).name=e),class:'input-3d',placeholder:'商品名称'},null,512),[[o.vModelText,(0,o.unref)(u).name]])]),(0,o.createElementVNode)('div',Sn,[i[30]||(i[30]=(0,o.createElementVNode)('label',null,'商品描述',-1)),(0,o.withDirectives)((0,o.createElementVNode)('textarea',{'onUpdate:modelValue':i[13]||(i[13]=e=>(0,o.unref)(u).desc=e),class:'textarea-3d',placeholder:'商品描述'},null,512),[[o.vModelText,(0,o.unref)(u).desc]])]),(0,o.createElementVNode)('div',zn,[i[31]||(i[31]=(0,o.createElementVNode)('label',null,'价格（积分）',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':i[14]||(i[14]=e=>(0,o.unref)(u).price=e),class:'input-3d',type:'number',placeholder:'0'},null,512),[[o.vModelText,(0,o.unref)(u).price,void 0,{number:!0}]]),(0,o.createElementVNode)('div',Dn,[(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[15]||(i[15]=e=>b(5))},'+5'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[16]||(i[16]=e=>b(10))},'+10'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[17]||(i[17]=e=>b(20))},'+20'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[18]||(i[18]=e=>b(50))},'+50'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[19]||(i[19]=e=>b(-5))},'-5'),(0,o.createElementVNode)('button',{class:'btn-3d quick-btn',onClick:i[20]||(i[20]=e=>b(-10))},'-10')])]),(0,o.createElementVNode)('div',_n,[i[32]||(i[32]=(0,o.createElementVNode)('label',null,'库存数量',-1)),(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':i[21]||(i[21]=e=>(0,o.unref)(u).stock=e),class:'input-3d',type:'number',placeholder:'1'},null,512),[[o.vModelText,(0,o.unref)(u).stock,void 0,{number:!0}]])]),(0,o.createElementVNode)('div',Tn,[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:i[22]||(i[22]=e=>c.value=!1)},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:E},'保存修改')])])])):(0,o.createCommentVNode)('v-if',!0),(0,o.unref)(v).visible?((0,o.openBlock)(),(0,o.createElementBlock)('div',xn,[(0,o.createElementVNode)('div',{class:'modal-content confirm'},[i[34]||(i[34]=(0,o.createElementVNode)('div',{class:'modal-title'},'确认删除',-1)),i[35]||(i[35]=(0,o.createElementVNode)('div',{class:'confirm-text'},'确定删除该商品吗？',-1)),(0,o.createElementVNode)('div',{class:'modal-actions'},[(0,o.createElementVNode)('button',{class:'btn-3d cancel-btn',onClick:N},'取消'),(0,o.createElementVNode)('button',{class:'btn-3d confirm-btn',onClick:k},'确认删除')])])])):(0,o.createCommentVNode)('v-if',!0)]))],2)]),_:1},8,['collapsed']))}}),$n=(0,r.A)(Mn,[['__scopeId','data-v-32b74a3f']]),In={class:'inventory-panel'},jn={key:0,class:'empty-state'},An={class:'inv-info'},Un={class:'inv-name'},Pn={class:'inv-source'},qn={class:'inv-desc'},Fn={class:'inv-actions'},On=['value','onChange'],Ln=['onClick'],Rn=(0,o.defineComponent)({__name:'InventoryPanel',setup(e){const t=H(),l=K(),n=(0,o.computed)(()=>t.data);return(e,a)=>((0,o.openBlock)(),(0,o.createBlock)(he,{title:'背包',collapsed:(0,o.unref)(l).isPanelCollapsed('inventory'),onToggle:a[0]||(a[0]=e=>(0,o.unref)(l).togglePanel('inventory'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',In,[0===Object.keys((0,o.unref)(n).商城.背包).length?((0,o.openBlock)(),(0,o.createElementBlock)('div',jn,' 背包为空 ')):((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:1,class:(0,o.normalizeClass)(['inventory-list',{'is-scroll':Object.keys((0,o.unref)(n).商城.背包).length>5}])},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(n).商城.背包,(e,l)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:l,class:'inv-item'},[(0,o.createElementVNode)('div',An,[(0,o.createElementVNode)('span',Un,(0,o.toDisplayString)(l),1),(0,o.createElementVNode)('span',Pn,(0,o.toDisplayString)(e.来源),1)]),(0,o.createElementVNode)('div',qn,(0,o.toDisplayString)(e.描述),1),(0,o.createElementVNode)('div',Fn,[a[1]||(a[1]=(0,o.createElementVNode)('label',{class:'inv-label'},'数量',-1)),(0,o.createElementVNode)('input',{class:'count-input',type:'number',min:'0',value:e.数量,onChange:e=>function(e,l){const n=t.data.商城.背包[e];if(!n)return;const a=l.target,o=Math.max(0,Number(a.value)||0);n.数量=o}(l,e)},null,40,On),(0,o.createElementVNode)('button',{class:'btn-3d tiny-btn',onClick:e=>function(e){delete t.data.商城.背包[e]}(l)},'删除',8,Ln)])]))),128))],2))])]),_:1},8,['collapsed']))}}),Gn=(0,r.A)(Rn,[['__scopeId','data-v-3f002aac']]),Jn={class:'control-panel'},Wn={class:'group'},Hn={class:'buttons'},Yn={class:'group'},Zn={class:'buttons'},Kn={class:'group'},Qn={class:'buttons compact'},Xn=['onClick','title'],ea=(0,o.defineComponent)({__name:'ControlPanel',setup(e){const t=K(),l=[{value:'send',label:'发送',desc:'直接发送到聊天'},{value:'input',label:'输入',desc:'填充到输入框（覆盖）'},{value:'append',label:'追加',desc:'追加到输入框（不覆盖）'}];return(e,n)=>((0,o.openBlock)(),(0,o.createBlock)(he,{title:'控制面板',collapsed:(0,o.unref)(t).isPanelCollapsed('controls'),onToggle:n[3]||(n[3]=e=>(0,o.unref)(t).togglePanel('controls'))},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('div',Jn,[(0,o.createElementVNode)('div',Wn,[n[4]||(n[4]=(0,o.createElementVNode)('div',{class:'group-title'},'视图',-1)),(0,o.createElementVNode)('div',Hn,[(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['btn-3d',{'is-active':!(0,o.unref)(t).isFullMode}]),onClick:n[0]||(n[0]=e=>(0,o.unref)(t).viewMode='hostOnly')},' 仅宿主可见 ',2),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['btn-3d',{'is-active':(0,o.unref)(t).isFullMode}]),onClick:n[1]||(n[1]=e=>(0,o.unref)(t).viewMode='full')},' 全部信息 ',2)])]),(0,o.createElementVNode)('div',Yn,[n[5]||(n[5]=(0,o.createElementVNode)('div',{class:'group-title'},'主题',-1)),(0,o.createElementVNode)('div',Zn,[(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['btn-3d',{'is-active':(0,o.unref)(t).darkMode}]),onClick:n[2]||(n[2]=e=>(0,o.unref)(t).toggleDarkMode())},' 夜间模式 ',2)])]),(0,o.createElementVNode)('div',Kn,[n[6]||(n[6]=(0,o.createElementVNode)('div',{class:'group-title'},'输入模式',-1)),(0,o.createElementVNode)('div',Qn,[((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l,e=>(0,o.createElementVNode)('button',{key:e.value,class:(0,o.normalizeClass)(['btn-3d',{'is-active':(0,o.unref)(t).inputMode===e.value}]),onClick:l=>(0,o.unref)(t).setInputMode(e.value),title:e.desc},(0,o.toDisplayString)(e.label),11,Xn)),64))])])])]),_:1},8,['collapsed']))}}),ta=(0,r.A)(ea,[['__scopeId','data-v-657283f2']]),la={class:'status-shell'},na={class:'tab-bar'},aa={class:'tab-main'},oa={key:'task',class:'tab-stack'},ca={key:'shop',class:'tab-stack'},sa={key:'inventory',class:'tab-stack'},ra={key:'control',class:'tab-stack'},ia={key:0,class:'tab-side'},da=(0,o.defineComponent)({__name:'App',setup(e){const t=K(),l=(0,o.computed)(()=>'host'===t.activeTab&&t.isFullMode);return(e,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',la,[(0,o.createVNode)(Ne),(0,o.createElementVNode)('div',na,[(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['tab-btn tab-host',{active:'host'===(0,o.unref)(t).activeTab}]),onClick:n[0]||(n[0]=e=>(0,o.unref)(t).setActiveTab('host'))},' 宿主 ',2),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['tab-btn tab-task',{active:'task'===(0,o.unref)(t).activeTab}]),onClick:n[1]||(n[1]=e=>(0,o.unref)(t).setActiveTab('task'))},' 任务 ',2),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['tab-btn tab-shop',{active:'shop'===(0,o.unref)(t).activeTab}]),onClick:n[2]||(n[2]=e=>(0,o.unref)(t).setActiveTab('shop'))},' 商城 ',2),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['tab-btn tab-inventory',{active:'inventory'===(0,o.unref)(t).activeTab}]),onClick:n[3]||(n[3]=e=>(0,o.unref)(t).setActiveTab('inventory'))},' 背包 ',2),(0,o.createElementVNode)('button',{class:(0,o.normalizeClass)(['tab-btn tab-control',{active:'control'===(0,o.unref)(t).activeTab}]),onClick:n[4]||(n[4]=e=>(0,o.unref)(t).setActiveTab('control'))},' 控制 ',2)]),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['tab-layout',{'is-single':!(0,o.unref)(l)}])},[(0,o.createElementVNode)('div',aa,[(0,o.createVNode)(o.Transition,{name:'retro-fade',mode:'out-in'},{default:(0,o.withCtx)(()=>['host'===(0,o.unref)(t).activeTab?((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:'host',class:(0,o.normalizeClass)(['tab-stack host-stack',{'is-full':(0,o.unref)(t).isFullMode}])},[(0,o.createVNode)(Je),(0,o.createVNode)(Rt)],2)):'task'===(0,o.unref)(t).activeTab?((0,o.openBlock)(),(0,o.createElementBlock)('div',oa,[(0,o.createVNode)(nn)])):'shop'===(0,o.unref)(t).activeTab?((0,o.openBlock)(),(0,o.createElementBlock)('div',ca,[(0,o.createVNode)($n)])):'inventory'===(0,o.unref)(t).activeTab?((0,o.openBlock)(),(0,o.createElementBlock)('div',sa,[(0,o.createVNode)(Gn)])):((0,o.openBlock)(),(0,o.createElementBlock)('div',ra,[(0,o.createVNode)(ta)]))]),_:1})]),(0,o.unref)(l)?((0,o.openBlock)(),(0,o.createElementBlock)('div',ia,[(0,o.createVNode)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>['host'===(0,o.unref)(t).activeTab&&(0,o.unref)(t).isFullMode?((0,o.openBlock)(),(0,o.createBlock)(at,{key:0})):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createVNode)(o.Transition,{name:'retro-fade'},{default:(0,o.withCtx)(()=>['host'===(0,o.unref)(t).activeTab&&(0,o.unref)(t).isFullMode?((0,o.openBlock)(),(0,o.createBlock)(Zt,{key:0})):(0,o.createCommentVNode)('v-if',!0)]),_:1})])):(0,o.createCommentVNode)('v-if',!0)],2)]))}}),ua=(0,r.A)(da,[['__scopeId','data-v-0f9e6bc1']]);$(async()=>{await waitGlobalInitialized('Mvu'),await e(()=>_.has(getVariables({type:'message'}),'stat_data')),(0,o.createApp)(ua).use(t()).mount('#app')});
//# sourceMappingURL=index.js.map</script><style>.glitch-text[data-v-efa08dda]{position:relative;display:inline-block;font-family:var(--font-mono);letter-spacing:1px}.glitch-text.active[data-v-efa08dda]{animation:flicker-efa08dda .3s steps(2,end)}.glitch-text.active[data-v-efa08dda]::before,.glitch-text.active[data-v-efa08dda]::after{content:attr(data-text);position:absolute;top:0;left:0;width:100%;height:100%;opacity:.6}.glitch-text.active[data-v-efa08dda]::before{transform:translate(-1px,0)}.glitch-text.active[data-v-efa08dda]::after{transform:translate(1px,0)}@keyframes flicker-efa08dda{0%{opacity:1}50%{opacity:.6}100%{opacity:1}}
.system-header[data-v-703cdc2f]{position:relative;display:flex;align-items:stretch;justify-content:flex-start;gap:12px;padding:8px 10px;background:var(--bg-window);border:1px solid var(--border);box-shadow:var(--shadow-soft);overflow:hidden}.scanline[data-v-703cdc2f]{position:absolute;inset:0;background:linear-gradient(90deg,transparent 0%,rgba(0,0,0,0.08) 50%,transparent 100%);animation:scan-move-703cdc2f 3.6s linear infinite;pointer-events:none}.header-left[data-v-703cdc2f]{display:flex;flex-direction:column;gap:4px;min-width:220px}.brand-row[data-v-703cdc2f]{display:flex;align-items:center;gap:6px}.brand-icon[data-v-703cdc2f]{font-family:var(--font-mono);font-size:.8rem}.rainbow-bar[data-v-703cdc2f]{height:4px;width:140px;background:var(--accent-rainbow);border:1px solid var(--border)}.ticker[data-v-703cdc2f]{border:1px solid var(--border);background:var(--bg-panel);padding:2px 6px;overflow:hidden;min-height:20px;height:22px}.ticker-track[data-v-703cdc2f]{display:block;white-space:nowrap}.typewriter[data-v-703cdc2f]{display:inline-block;font-family:var(--font-mono);font-size:.75rem;line-height:1}.typewriter.active[data-v-703cdc2f]::after{content:"▮";margin-left:4px;animation:caret-blink-703cdc2f .9s steps(2,end) infinite}.header-right[data-v-703cdc2f]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px 10px;align-items:center;min-width:260px;flex:1}.status-block[data-v-703cdc2f]{display:flex;flex-direction:column;gap:2px;padding-left:8px;border-left:1px solid var(--border);min-height:32px}.status-label[data-v-703cdc2f]{font-size:.65rem;color:var(--ink-dim);letter-spacing:1px}.status-value[data-v-703cdc2f]{font-size:.8rem;color:var(--ink)}.status-value.mono[data-v-703cdc2f]{font-family:var(--font-mono);letter-spacing:1px;font-variant-numeric:tabular-nums}.log-strip[data-v-703cdc2f]{grid-column:1/-1;display:flex;align-items:center;gap:6px;padding:4px 6px;border:1px solid var(--border);background:var(--bg-panel);font-family:var(--font-mono);font-size:.75rem;min-height:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.log-label[data-v-703cdc2f]{color:var(--ink-dim)}.log-text[data-v-703cdc2f]{color:var(--ink)}.stat-item[data-v-703cdc2f]{display:flex;flex-direction:column;align-items:flex-end;padding-left:8px;border-left:1px solid var(--border)}.stat-label[data-v-703cdc2f]{font-size:.65rem;color:var(--ink-dim);letter-spacing:1px}.stat-value[data-v-703cdc2f]{font-size:.95rem;font-weight:700;color:var(--ink);font-variant-numeric:tabular-nums}@media (max-width:780px){.system-header[data-v-703cdc2f]{flex-direction:column;gap:8px}.header-right[data-v-703cdc2f]{grid-template-columns:1fr 1fr}}@keyframes scan-move-703cdc2f{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}@keyframes caret-blink-703cdc2f{0%{opacity:0}50%{opacity:1}100%{opacity:0}}
.cyber-card[data-v-6fa4f3e4]{background:var(--bg-panel);border:1px solid var(--border);box-shadow:var(--shadow-hard);overflow:hidden}.card-header[data-v-6fa4f3e4]{display:flex;align-items:center;gap:8px;padding:8px 10px;cursor:pointer;-webkit-user-select:none;user-select:none;border-bottom:1px solid var(--border);background:var(--bg-window)}.card-icon[data-v-6fa4f3e4]{color:var(--ink);font-size:.85rem}.card-title[data-v-6fa4f3e4]{flex:1;font-size:.75rem;font-weight:700;color:var(--ink-soft);letter-spacing:1px;text-transform:uppercase}.card-arrow[data-v-6fa4f3e4]{font-size:.6rem;color:var(--ink-dim);transition:transform .2s ease}.card-arrow.rotated[data-v-6fa4f3e4]{transform:rotate(90deg)}.card-body[data-v-6fa4f3e4]{padding:12px}.card-expand-enter-active[data-v-6fa4f3e4],.card-expand-leave-active[data-v-6fa4f3e4]{transition:all .2s ease;overflow:hidden}.card-expand-enter-from[data-v-6fa4f3e4],.card-expand-leave-to[data-v-6fa4f3e4]{opacity:0;max-height:0;padding-top:0;padding-bottom:0}
.host-info[data-v-15133887]{display:flex;flex-direction:column;gap:8px}.info-row[data-v-15133887]{display:flex;justify-content:space-between;align-items:center}.label[data-v-15133887]{font-size:.75rem;color:var(--ink-dim)}.value[data-v-15133887]{color:var(--ink);font-weight:600}.section-title[data-v-15133887]{font-size:.7rem;color:var(--ink-soft);text-transform:uppercase;letter-spacing:1px;margin-top:8px;padding-bottom:4px;border-bottom:1px solid var(--border)}.section-title.secret[data-v-15133887]{color:var(--ink)}.personality-list[data-v-15133887]{display:flex;flex-direction:column;gap:6px;margin-top:4px}.p-row[data-v-15133887]{display:flex;justify-content:space-between;padding:4px 6px;background:var(--bg-window);border:1px solid var(--border);box-shadow:var(--shadow-soft)}.p-label[data-v-15133887]{font-size:.7rem;color:var(--ink-dim)}.p-value[data-v-15133887]{font-size:.75rem;color:var(--ink)}.core-section[data-v-15133887]{margin-top:8px}.core-content[data-v-15133887]{padding:8px;background:var(--bg-window);border:1px solid var(--border);box-shadow:var(--shadow-soft);font-size:.8rem}.secret-section[data-v-15133887]{margin-top:8px}.secret-content[data-v-15133887]{padding:8px;background:var(--bg-window);border:1px solid var(--border);box-shadow:var(--shadow-soft);font-size:.8rem}
.neon-progress[data-v-20588dfa]{display:flex;align-items:center;gap:8px;font-family:var(--font-mono)}.progress-label[data-v-20588dfa]{font-size:.75rem;color:var(--ink-dim);min-width:60px}.progress-track[data-v-20588dfa]{flex:1;height:10px;background:#fff;border:1px solid var(--border);box-shadow:inset 1px 1px 0 var(--border-light);position:relative;overflow:hidden}.progress-fill[data-v-20588dfa]{height:100%;background:var(--ink);transition:width .4s ease}.progress-glow[data-v-20588dfa]{position:absolute;top:0;left:0;height:100%;background:var(--ink);opacity:.2;transition:width .4s ease}.progress-value[data-v-20588dfa]{font-size:.75rem;color:var(--ink);min-width:54px;text-align:right}
.psych-info[data-v-428b1c66]{display:flex;flex-direction:column;gap:12px}.info-row[data-v-428b1c66]{display:flex;justify-content:space-between;align-items:center}.label[data-v-428b1c66]{font-size:.75rem;color:var(--ink-dim)}.value[data-v-428b1c66]{color:var(--ink);font-weight:600}.shame-section[data-v-428b1c66]{padding-top:4px}
.body-info[data-v-43921151]{display:flex;flex-direction:column;gap:8px}.section-title[data-v-43921151]{font-size:.7rem;color:var(--ink-soft);text-transform:uppercase;letter-spacing:1px;padding-bottom:4px;border-bottom:1px solid var(--border)}.clothing-section[data-v-43921151]{display:flex;flex-direction:column;gap:8px}.clothing-item[data-v-43921151]{display:flex;justify-content:space-between;font-size:.8rem;padding:4px 6px;border:1px solid var(--border);background:var(--bg-window);box-shadow:var(--shadow-soft)}.c-label[data-v-43921151]{color:var(--ink-dim)}.c-value[data-v-43921151]{color:var(--ink);font-weight:600}.virginity-list[data-v-43921151]{display:flex;flex-direction:column;gap:6px;margin-top:6px}.v-item[data-v-43921151]{display:flex;align-items:center;gap:6px;font-size:.8rem}.v-item .v-icon[data-v-43921151]{color:var(--ink)}.v-item.lost .v-icon[data-v-43921151]{color:var(--ink-dim)}.v-item.unknown .v-icon[data-v-43921151]{color:var(--ink-dim)}.v-label[data-v-43921151]{color:var(--ink-soft)}.v-note[data-v-43921151]{font-size:.7rem;color:var(--ink-dim)}.realtime-list[data-v-43921151]{display:flex;flex-direction:column;gap:6px;margin-top:6px}.rt-item[data-v-43921151]{display:flex;justify-content:space-between;font-size:.8rem;padding:4px 6px;border:1px solid var(--border);background:var(--bg-panel)}.rt-label[data-v-43921151]{color:var(--ink-dim)}.rt-value[data-v-43921151]{color:var(--ink);font-weight:600}
.corruption-list[data-v-c995ecb2]{display:flex;flex-direction:column;gap:6px}.empty-state[data-v-c995ecb2]{text-align:center;color:var(--ink-dim);font-size:.8rem;padding:12px}.corruption-item[data-v-c995ecb2]{display:flex;align-items:center;font-size:.8rem}.type[data-v-c995ecb2]{color:var(--ink-soft)}.dots[data-v-c995ecb2]{flex:1;border-bottom:1px dotted var(--border);margin:0 8px}.count[data-v-c995ecb2]{color:var(--ink);font-weight:700}
.task-panel[data-v-7028f404]{display:flex;flex-direction:column;gap:8px;min-height:340px}.task-panel.is-publishing[data-v-7028f404]{animation:publish-flash-7028f404 .3s ease}.inline-toast[data-v-7028f404]{padding:6px 8px;border:1px solid var(--border);background:var(--bg-window);box-shadow:var(--shadow-soft);font-size:.75rem;color:var(--ink)}.section-title[data-v-7028f404]{font-size:.7rem;color:var(--ink-soft);text-transform:uppercase;letter-spacing:1px;margin-top:8px}.task-card[data-v-7028f404]{padding:10px;background:var(--bg-panel);border:1px solid var(--border);box-shadow:var(--shadow-soft)}.task-card.main[data-v-7028f404]{border-left:4px solid var(--border)}.task-card.side[data-v-7028f404]{border-left:2px dashed var(--border)}.task-list[data-v-7028f404]{display:flex;flex-direction:column;gap:8px}.task-list.is-scroll[data-v-7028f404]{max-height:420px;overflow-y:auto;padding-right:4px}.task-header[data-v-7028f404]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:4px}.task-actions[data-v-7028f404]{display:flex;gap:6px}.success-btn[data-v-7028f404]:not([disabled]){background:var(--bg-window)}.task-title[data-v-7028f404]{font-weight:700;color:var(--ink)}.tiny-btn[data-v-7028f404]{padding:2px 6px;font-size:.65rem;box-shadow:var(--shadow-soft)}.task-desc[data-v-7028f404],.task-condition[data-v-7028f404],.task-limit[data-v-7028f404],.task-penalty[data-v-7028f404],.task-reward[data-v-7028f404]{font-size:.8rem;color:var(--ink-soft);margin-bottom:2px}.task-status[data-v-7028f404]{font-size:.75rem;color:var(--ink-dim);margin-top:6px}.task-status.completed[data-v-7028f404]{color:var(--ink)}.task-card.completing[data-v-7028f404]{animation:complete-flash-7028f404 .4s ease}.action-row[data-v-7028f404]{display:flex;gap:8px;flex-wrap:wrap}.publish-btn[data-v-7028f404]{margin-top:8px;padding:8px}.reward-items[data-v-7028f404]{display:flex;flex-direction:column;gap:6px}.reward-item-row[data-v-7028f404]{display:grid;grid-template-columns:1fr 72px auto;gap:6px;align-items:center}.reward-count[data-v-7028f404]{text-align:center}.modal-overlay[data-v-7028f404]{position:fixed;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;padding:16px;z-index:1000}.modal-content[data-v-7028f404]{background:var(--bg-paper);border:1px solid var(--border);box-shadow:var(--shadow-hard);padding:16px;width:92%;max-width:380px;max-height:calc(100% - 32px);overflow-y:auto}.modal-content.confirm[data-v-7028f404]{max-width:320px}.modal-title[data-v-7028f404]{font-size:.95rem;color:var(--ink);margin-bottom:10px;text-align:center;font-weight:700}.confirm-text[data-v-7028f404]{text-align:center;font-size:.85rem;color:var(--ink-soft);margin-bottom:12px}.form-group[data-v-7028f404]{margin-bottom:8px}.form-group label[data-v-7028f404]{display:block;font-size:.7rem;color:var(--ink-dim);margin-bottom:4px}.quick-row[data-v-7028f404]{display:flex;gap:6px;margin-top:6px;flex-wrap:wrap}.quick-btn[data-v-7028f404]{padding:4px 6px;font-size:.7rem}.checkbox-row[data-v-7028f404]{display:flex;align-items:center;gap:6px;font-size:.75rem;color:var(--ink-soft);margin-top:6px}.checkbox-row input[data-v-7028f404]{accent-color:var(--ink)}.modal-actions[data-v-7028f404]{display:flex;gap:8px;margin-top:10px}.cancel-btn[data-v-7028f404],.confirm-btn[data-v-7028f404]{flex:1;padding:6px 8px}@media (max-width:480px){.modal-content[data-v-7028f404]{padding:12px}.task-panel[data-v-7028f404]{min-height:auto}.reward-item-row[data-v-7028f404]{grid-template-columns:1fr 72px}}@keyframes publish-flash-7028f404{0%{background:var(--bg-panel)}50%{background:#fff}100%{background:var(--bg-panel)}}@keyframes complete-flash-7028f404{0%{background:var(--bg-panel);box-shadow:var(--shadow-soft)}50%{background:var(--bg-window);box-shadow:2px 2px 0 var(--border)}100%{background:var(--bg-panel);box-shadow:var(--shadow-soft)}}
.shop-panel[data-v-32b74a3f]{display:flex;flex-direction:column;gap:8px;min-height:340px}.shop-panel.is-listing[data-v-32b74a3f]{animation:publish-flash-32b74a3f .3s ease}.inline-toast[data-v-32b74a3f]{padding:6px 8px;border:1px solid var(--border);background:var(--bg-window);box-shadow:var(--shadow-soft);font-size:.75rem;color:var(--ink)}.shop-list[data-v-32b74a3f]{display:flex;flex-direction:column;gap:8px}.shop-list.is-scroll[data-v-32b74a3f]{max-height:360px;overflow-y:auto;padding-right:4px}.shop-item[data-v-32b74a3f]{padding:10px;background:var(--bg-panel);border:1px solid var(--border);box-shadow:var(--shadow-soft)}.item-header[data-v-32b74a3f]{display:flex;justify-content:space-between;gap:10px;margin-bottom:4px}.item-name[data-v-32b74a3f]{font-weight:700;color:var(--ink)}.item-actions[data-v-32b74a3f]{display:flex;align-items:center;gap:6px}.item-price[data-v-32b74a3f]{color:var(--ink-soft);font-weight:700}.tiny-btn[data-v-32b74a3f]{padding:2px 6px;font-size:.65rem;box-shadow:var(--shadow-soft)}.item-desc[data-v-32b74a3f]{font-size:.75rem;color:var(--ink-soft);margin-bottom:6px}.item-stock[data-v-32b74a3f]{font-size:.75rem;color:var(--ink-dim)}.empty-state[data-v-32b74a3f]{text-align:center;color:var(--ink-dim);padding:16px}.action-row[data-v-32b74a3f]{display:flex;gap:8px;flex-wrap:wrap}.add-btn[data-v-32b74a3f]{padding:8px}.modal-overlay[data-v-32b74a3f]{position:fixed;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;padding:16px;z-index:1000}.modal-content[data-v-32b74a3f]{background:var(--bg-paper);border:1px solid var(--border);box-shadow:var(--shadow-hard);padding:16px;width:92%;max-width:380px;max-height:calc(100% - 32px);overflow-y:auto}.modal-content.confirm[data-v-32b74a3f]{max-width:320px}.modal-title[data-v-32b74a3f]{font-size:.95rem;color:var(--ink);margin-bottom:10px;text-align:center;font-weight:700}.confirm-text[data-v-32b74a3f]{text-align:center;font-size:.85rem;color:var(--ink-soft);margin-bottom:12px}.form-group[data-v-32b74a3f]{margin-bottom:8px}.form-group label[data-v-32b74a3f]{display:block;font-size:.7rem;color:var(--ink-dim);margin-bottom:4px}.quick-row[data-v-32b74a3f]{display:flex;gap:6px;margin-top:6px;flex-wrap:wrap}.quick-btn[data-v-32b74a3f]{padding:4px 6px;font-size:.7rem}.modal-actions[data-v-32b74a3f]{display:flex;gap:8px;margin-top:10px}.cancel-btn[data-v-32b74a3f],.confirm-btn[data-v-32b74a3f]{flex:1;padding:6px 8px}@media (max-width:480px){.modal-content[data-v-32b74a3f]{padding:12px}.shop-panel[data-v-32b74a3f]{min-height:auto}}@keyframes publish-flash-32b74a3f{0%{background:var(--bg-panel)}50%{background:#fff}100%{background:var(--bg-panel)}}
.inventory-panel[data-v-3f002aac]{display:flex;flex-direction:column}.empty-state[data-v-3f002aac]{text-align:center;color:var(--ink-dim);padding:16px}.inventory-list[data-v-3f002aac]{display:flex;flex-direction:column;gap:8px}.inventory-list.is-scroll[data-v-3f002aac]{max-height:360px;overflow-y:auto;padding-right:4px}.inv-item[data-v-3f002aac]{display:grid;grid-template-columns:minmax(120px,0.8fr) minmax(150px,1fr) minmax(140px,0.6fr);gap:10px;align-items:center;padding:8px;background:var(--bg-panel);border:1px solid var(--border);box-shadow:var(--shadow-soft)}.inv-info[data-v-3f002aac]{display:flex;flex-direction:column;min-width:80px}.inv-name[data-v-3f002aac]{color:var(--ink);font-weight:700}.inv-source[data-v-3f002aac]{font-size:.65rem;color:var(--ink-dim)}.inv-desc[data-v-3f002aac]{font-size:.75rem;color:var(--ink-soft);line-height:1.2;min-height:1.2em;max-height:2.4em;min-width:0;overflow:hidden;word-break:break-word}@supports (-webkit-line-clamp:2){.inv-desc[data-v-3f002aac]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}}.inv-actions[data-v-3f002aac]{display:flex;align-items:center;justify-content:flex-end;gap:6px}.inv-label[data-v-3f002aac]{font-size:.65rem;color:var(--ink-dim)}.count-input[data-v-3f002aac]{width:64px;padding:2px 6px;font-size:.75rem;border:1px solid var(--border);background:var(--bg-window);color:var(--ink);font-family:var(--font-mono)}.tiny-btn[data-v-3f002aac]{padding:2px 6px;font-size:.65rem;box-shadow:var(--shadow-soft)}@media (max-width:520px){.inv-item[data-v-3f002aac]{grid-template-columns:1fr}.inv-actions[data-v-3f002aac]{justify-content:flex-start}.inv-desc[data-v-3f002aac]{display:block;overflow:visible}}
.control-panel[data-v-657283f2]{display:flex;flex-direction:column;gap:10px}.group[data-v-657283f2]{display:flex;flex-direction:column;gap:6px}.group-title[data-v-657283f2]{font-size:.7rem;color:var(--ink-dim);letter-spacing:1px}.buttons[data-v-657283f2]{display:flex;gap:6px}.buttons.compact[data-v-657283f2]{gap:4px}.buttons.compact .btn-3d[data-v-657283f2]{padding:4px 6px;font-size:.7rem}
.status-shell[data-v-0f9e6bc1]{background:var(--bg-paper);border:1px solid var(--border);box-shadow:var(--shadow-hard);padding:6px;width:100%}.tab-bar[data-v-0f9e6bc1]{display:flex;align-items:center;gap:6px;margin:8px 2px 10px;flex-wrap:wrap}.tab-btn[data-v-0f9e6bc1]{border:1px solid var(--border);background:var(--bg-panel);box-shadow:var(--shadow-hard);padding:6px 10px;font-size:.75rem;cursor:pointer;font-family:var(--font-ui);transition:transform .1s ease,box-shadow .1s ease,background .2s ease}.tab-btn.active[data-v-0f9e6bc1]{background:var(--bg-inset)}.tab-btn[data-v-0f9e6bc1]:active{transform:translate(1px,1px);box-shadow:var(--shadow-soft)}.tab-btn.tab-host[data-v-0f9e6bc1]{flex:1.1}.tab-btn.tab-task[data-v-0f9e6bc1]{flex:.85}.tab-btn.tab-shop[data-v-0f9e6bc1]{flex:.95}.tab-btn.tab-inventory[data-v-0f9e6bc1]{flex:.85}.tab-btn.tab-control[data-v-0f9e6bc1]{flex:.7}.tab-layout[data-v-0f9e6bc1]{display:grid;grid-template-columns:1.35fr .65fr;gap:12px;align-items:start;width:100%}.tab-layout.is-single[data-v-0f9e6bc1]{grid-template-columns:1fr}.tab-main[data-v-0f9e6bc1]{min-width:0;width:100%}.tab-side[data-v-0f9e6bc1]{display:flex;flex-direction:column;gap:10px;padding-top:4px;width:100%}.tab-stack[data-v-0f9e6bc1]{display:flex;flex-direction:column;gap:10px;width:100%}.host-stack.is-full[data-v-0f9e6bc1]{display:grid;grid-template-columns:1fr 1fr;gap:10px}.host-stack.is-full[data-v-0f9e6bc1]>*{min-width:0}@media (max-width:900px){.tab-layout[data-v-0f9e6bc1]{grid-template-columns:1fr}.tab-side[data-v-0f9e6bc1]{order:2}.host-stack.is-full[data-v-0f9e6bc1]{grid-template-columns:1fr}}
:root{--bg-paper:#f0f0f0;--bg-window:#e2e2e2;--bg-panel:#f7f7f7;--bg-inset:#dcdcdc;--ink:#0c0c0c;--ink-soft:#2b2b2b;--ink-dim:#6a6a6a;--border:#000000;--border-light:#ffffff;--shadow-hard:2px 2px 0 #000000;--shadow-soft:1px 1px 0 #000000;--accent:#000000;--accent-rainbow:linear-gradient(90deg,#ff3b30,#ff9500,#ffcc00,#34c759,#5ac8fa,#007aff,#5856d6);--font-ui:'Chicago','Geneva','Pixelated MS Sans Serif','MS Sans Serif','Courier New',monospace;--font-mono:'Courier New','Chicago',monospace;--scroll-track:#e6e6e6;--scroll-thumb:#b9b9b9;--scroll-thumb-hover:#9a9a9a}:root[data-theme=dark]{--bg-paper:#161616;--bg-window:#1e1e1e;--bg-panel:#222222;--bg-inset:#0f0f0f;--ink:#e1e1e1;--ink-soft:#c4c4c4;--ink-dim:#949494;--border:#595959;--border-light:#2a2a2a;--shadow-hard:1px 1px 0 #0a0a0a;--shadow-soft:0 0 0 #000000;--scroll-track:#1b1b1b;--scroll-thumb:#3d3d3d;--scroll-thumb-hover:#5a5a5a}*{box-sizing:border-box;margin:0;padding:0}body{font-family:var(--font-ui);background:rgba(0,0,0,0);color:var(--ink);font-size:13px;line-height:1.4}#app{width:100%;max-width:none;margin:0;padding:6px 6px 12px}#app *{scrollbar-width:thin;scrollbar-color:var(--scroll-thumb) var(--scroll-track)}#app *::-webkit-scrollbar{width:10px;height:10px}#app *::-webkit-scrollbar-track{background:var(--scroll-track);border:1px solid var(--border);box-shadow:inset 1px 1px 0 var(--border-light)}#app *::-webkit-scrollbar-thumb{background:var(--scroll-thumb);border:1px solid var(--border);box-shadow:inset 1px 1px 0 var(--border-light)}#app *::-webkit-scrollbar-thumb:hover{background:var(--scroll-thumb-hover)}.btn-3d{border:1px solid var(--border);background:var(--bg-panel);box-shadow:var(--shadow-hard);padding:6px 10px;font-size:.75rem;cursor:pointer;font-family:var(--font-ui);color:var(--ink);transition:transform .1s ease,box-shadow .1s ease,background .2s ease}.btn-3d.is-active{background:var(--bg-inset)}.btn-3d:active{transform:translate(1px,1px);box-shadow:var(--shadow-soft)}.btn-3d[disabled]{opacity:.6;cursor:not-allowed}.input-3d,.select-3d,.textarea-3d{width:100%;padding:6px 8px;background:var(--bg-paper);border:1px solid var(--border);box-shadow:inset 1px 1px 0 var(--border-light);font-family:var(--font-ui);font-size:.8rem;color:var(--ink)}.textarea-3d{min-height:60px;resize:vertical}.retro-fade-enter-active,.retro-fade-leave-active{transition:opacity .2s ease,transform .2s ease}.retro-fade-enter-from,.retro-fade-leave-to{opacity:0;transform:translateY(6px)}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div><div id="teleport-target"></div></body>
